{
  "horizon": 30,
  "timestamp": "20251217_231508",
  "metrics": {
    "long_accuracy": 0.8075197889182057,
    "short_accuracy": 0.845778364116095,
    "long_precision": 0.24180327868852458,
    "short_precision": 0.2,
    "long_recall": 0.09776304888152444,
    "short_recall": 0.02187784867821331,
    "long_f1": 0.1392330383480826,
    "short_f1": 0.03944124897288414
  },
  "financial": {
    "pnl": -14.842385698348304,
    "sharpe": 7.299336837289812,
    "max_drawdown": 22.584223075371842
  },
  "feature_analysis": {
    "long_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.20542356258667943,
          "mutual_info": 0.006561771781378178,
          "abs_correlation": 0.02546590289724631
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.1184647473602869,
          "mutual_info": 0.002838909768852149,
          "abs_correlation": 0.016699911903060548
        },
        {
          "feature": "macd_hist",
          "importance": 0.09980410485633055,
          "mutual_info": 0.0032134445195945993,
          "abs_correlation": 0.012052925604562321
        },
        {
          "feature": "log_return",
          "importance": 0.08283187887376299,
          "mutual_info": 0.004172892470616141,
          "abs_correlation": 0.002006678187986608
        },
        {
          "feature": "rsi_14",
          "importance": 0.07590069514049431,
          "mutual_info": 0.0,
          "abs_correlation": 0.00507045467903305
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.07329475317537233,
          "mutual_info": 0.0,
          "abs_correlation": 0.046166215183072824
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.0627384833002044,
          "mutual_info": 0.0030622887825262346,
          "abs_correlation": 0.011876395636251957
        },
        {
          "feature": "volume_change",
          "importance": 0.0543253673718213,
          "mutual_info": 0.009472382780774558,
          "abs_correlation": 0.1157713090994973
        },
        {
          "feature": "log_return_lag_2",
          "importance": 0.05328133220139039,
          "mutual_info": 0.013702423291402033,
          "abs_correlation": 0.15518042521626296
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.052589780058102636,
          "mutual_info": 0.0039061366757076055,
          "abs_correlation": 0.0249868868414742
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.20542356258667943,
        "min_importance": 0.020656706728995305,
        "mean_importance": 0.07692307692307694
      }
    },
    "short_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.1778840797744775,
          "mutual_info": 0.0,
          "abs_correlation": 0.005826563411245229
        },
        {
          "feature": "macd_hist",
          "importance": 0.10430449961869562,
          "mutual_info": 0.001024295826629107,
          "abs_correlation": 0.000693159807292163
        },
        {
          "feature": "rsi_14",
          "importance": 0.09357559835507788,
          "mutual_info": 0.0,
          "abs_correlation": 0.003011295055499559
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.09089935542103399,
          "mutual_info": 0.0037700860112661605,
          "abs_correlation": 0.01976934797707861
        },
        {
          "feature": "hour_sin",
          "importance": 0.08254673749015462,
          "mutual_info": 0.00481061946911665,
          "abs_correlation": 0.03444874485644929
        },
        {
          "feature": "log_return",
          "importance": 0.06935742196882057,
          "mutual_info": 0.0006576398926820826,
          "abs_correlation": 0.032943861048858145
        },
        {
          "feature": "hour_cos",
          "importance": 0.06565232158438725,
          "mutual_info": 0.0,
          "abs_correlation": 0.0030628095485236836
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.06311903989560178,
          "mutual_info": 0.00381371187403845,
          "abs_correlation": 0.05942504922604221
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.05954812874945332,
          "mutual_info": 0.00990610322593577,
          "abs_correlation": 0.08898147375484829
        },
        {
          "feature": "volume_change",
          "importance": 0.05562095600918532,
          "mutual_info": 0.0,
          "abs_correlation": 0.03615532656253421
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.1778840797744775,
        "min_importance": 0.02957094408759913,
        "mean_importance": 0.07692307692307691
      }
    }
  },
  "trades_detailed": {
    "summary": {
      "total_trades": 240,
      "winning_trades": 101,
      "losing_trades": 139,
      "win_rate": 0.42083333333333334,
      "avg_win_pct": 0.007718445589187694,
      "avg_loss_pct": -0.006946841906526275,
      "profit_factor": 0.5295596926512504,
      "largest_win_pct": 0.03003213006174943,
      "largest_loss_pct": -0.04079255174875396,
      "avg_holding_minutes": 147.48117154811715
    },
    "by_direction": {
      "long": {
        "total_trades": 185,
        "winning_trades": 75,
        "losing_trades": 110,
        "win_rate": 0.40540540540540543,
        "avg_win_pct": 0.007842299485472243,
        "avg_loss_pct": -0.006818610982036345,
        "profit_factor": 0.5198535804491308,
        "largest_win_pct": 0.02294988582150914,
        "largest_loss_pct": -0.038398930168626166,
        "avg_holding_minutes": 150.83152173913044
      },
      "short": {
        "total_trades": 55,
        "winning_trades": 26,
        "losing_trades": 29,
        "win_rate": 0.4727272727272727,
        "avg_win_pct": 0.007361174734520726,
        "avg_loss_pct": -0.007433235068384627,
        "profit_factor": 0.5630603944367053,
        "largest_win_pct": 0.03003213006174943,
        "largest_loss_pct": -0.04079255174875396,
        "avg_holding_minutes": 136.27272727272728
      },
      "total_trades": 240,
      "long_count": 185,
      "short_count": 55
    },
    "holding_time_stats": {
      "mean": 146.86666666666667,
      "median": 84.0,
      "min": 0.0,
      "max": 1943.0,
      "std": 244.1842689900851
    },
    "exit_reasons": {
      "MAX_HOLD": 79,
      "STOP_LOSS": 106,
      "TAKE_PROFIT": 54,
      "FORCE_CLOSE": 1
    },
    "hourly_performance": {
      "0": {
        "avg_pnl": -5.077344356557398,
        "win_rate": 0.13333333333333333,
        "total_trades": 15,
        "total_pnl": -76.16016534836096
      },
      "6": {
        "avg_pnl": -7.707925830994671,
        "win_rate": 0.16666666666666666,
        "total_trades": 6,
        "total_pnl": -46.24755498596802
      },
      "13": {
        "avg_pnl": -3.1901218615738145,
        "win_rate": 0.38095238095238093,
        "total_trades": 21,
        "total_pnl": -66.9925590930501
      },
      "14": {
        "avg_pnl": -1.6938777025483922,
        "win_rate": 0.47619047619047616,
        "total_trades": 21,
        "total_pnl": -35.57143175351624
      },
      "8": {
        "avg_pnl": -2.5231674841405525,
        "win_rate": 0.3333333333333333,
        "total_trades": 6,
        "total_pnl": -15.139004904843315
      },
      "15": {
        "avg_pnl": -5.096067956269268,
        "win_rate": 0.2692307692307692,
        "total_trades": 26,
        "total_pnl": -132.49776686300098
      },
      "16": {
        "avg_pnl": -1.952851533282079,
        "win_rate": 0.36363636363636365,
        "total_trades": 22,
        "total_pnl": -42.96273373220574
      },
      "17": {
        "avg_pnl": 0.9143158411058327,
        "win_rate": 0.5555555555555556,
        "total_trades": 18,
        "total_pnl": 16.45768513990499
      },
      "2": {
        "avg_pnl": -2.910687479709994,
        "win_rate": 0.2222222222222222,
        "total_trades": 9,
        "total_pnl": -26.19618731738995
      },
      "4": {
        "avg_pnl": -3.4665855239183694,
        "win_rate": 0.2857142857142857,
        "total_trades": 7,
        "total_pnl": -24.266098667428587
      },
      "9": {
        "avg_pnl": 2.1408553803072263,
        "win_rate": 0.6,
        "total_trades": 5,
        "total_pnl": 10.704276901536131
      },
      "3": {
        "avg_pnl": 0.2333425860941486,
        "win_rate": 0.5555555555555556,
        "total_trades": 9,
        "total_pnl": 2.1000832748473375
      },
      "7": {
        "avg_pnl": -7.051467951278572,
        "win_rate": 0.3333333333333333,
        "total_trades": 3,
        "total_pnl": -21.154403853835717
      },
      "19": {
        "avg_pnl": -3.130280071465538,
        "win_rate": 0.26666666666666666,
        "total_trades": 15,
        "total_pnl": -46.95420107198307
      },
      "20": {
        "avg_pnl": -1.9778352232957297,
        "win_rate": 0.38461538461538464,
        "total_trades": 13,
        "total_pnl": -25.711857902844486
      },
      "21": {
        "avg_pnl": 0.7553466811269914,
        "win_rate": 0.5555555555555556,
        "total_trades": 9,
        "total_pnl": 6.798120130142923
      },
      "10": {
        "avg_pnl": 8.709807887843917,
        "win_rate": 1.0,
        "total_trades": 3,
        "total_pnl": 26.129423663531753
      },
      "11": {
        "avg_pnl": -3.4923799952068535,
        "win_rate": 0.5,
        "total_trades": 6,
        "total_pnl": -20.95427997124112
      },
      "1": {
        "avg_pnl": -0.5832296893716722,
        "win_rate": 0.42857142857142855,
        "total_trades": 7,
        "total_pnl": -4.0826078256017055
      },
      "18": {
        "avg_pnl": -1.462082061346608,
        "win_rate": 0.4,
        "total_trades": 5,
        "total_pnl": -7.31041030673304
      },
      "5": {
        "avg_pnl": 2.128823637287585,
        "win_rate": 0.4,
        "total_trades": 5,
        "total_pnl": 10.644118186437925
      },
      "22": {
        "avg_pnl": -2.7070324674841433,
        "win_rate": 0.3333333333333333,
        "total_trades": 6,
        "total_pnl": -16.24219480490486
      },
      "23": {
        "avg_pnl": -4.650262806632787,
        "win_rate": 0.0,
        "total_trades": 2,
        "total_pnl": -9.300525613265574
      },
      "12": {
        "avg_pnl": 6.518840483108688,
        "win_rate": 1.0,
        "total_trades": 1,
        "total_pnl": 6.518840483108688
      }
    },
    "confidence_quartiles": {
      "Q1": {
        "avg_pnl": -2.1290080598231262,
        "win_rate": 0.38333333333333336,
        "avg_confidence": -0.16508427272917842,
        "trades": 60
      },
      "Q2": {
        "avg_pnl": -1.35801859890433,
        "win_rate": 0.45,
        "avg_confidence": 0.09009820962871772,
        "trades": 60
      },
      "Q3": {
        "avg_pnl": -4.116753893319408,
        "win_rate": 0.26666666666666666,
        "avg_confidence": 0.12234066865749446,
        "trades": 60
      },
      "Q4": {
        "avg_pnl": -1.3694100518975305,
        "win_rate": 0.4166666666666667,
        "avg_confidence": 0.19752956452018985,
        "trades": 60
      }
    }
  },
  "threshold_sensitivity": [
    {
      "threshold": 0.3,
      "total_signals": 2007,
      "long_signals": 1128,
      "short_signals": 879,
      "signal_ratio": 0.2647757255936675,
      "accuracy": 0.5473614775725594
    },
    {
      "threshold": 0.35,
      "total_signals": 2236,
      "long_signals": 975,
      "short_signals": 1261,
      "signal_ratio": 0.2949868073878628,
      "accuracy": 0.553825857519789
    },
    {
      "threshold": 0.39999999999999997,
      "total_signals": 2024,
      "long_signals": 688,
      "short_signals": 1336,
      "signal_ratio": 0.2670184696569921,
      "accuracy": 0.5994722955145119
    },
    {
      "threshold": 0.44999999999999996,
      "total_signals": 1549,
      "long_signals": 543,
      "short_signals": 1006,
      "signal_ratio": 0.20435356200527705,
      "accuracy": 0.6428759894459103
    },
    {
      "threshold": 0.49999999999999994,
      "total_signals": 970,
      "long_signals": 394,
      "short_signals": 576,
      "signal_ratio": 0.1279683377308707,
      "accuracy": 0.6807387862796834
    },
    {
      "threshold": 0.5499999999999999,
      "total_signals": 509,
      "long_signals": 258,
      "short_signals": 251,
      "signal_ratio": 0.06715039577836411,
      "accuracy": 0.6951187335092348
    },
    {
      "threshold": 0.5999999999999999,
      "total_signals": 217,
      "long_signals": 107,
      "short_signals": 110,
      "signal_ratio": 0.02862796833773087,
      "accuracy": 0.7051451187335093
    },
    {
      "threshold": 0.6499999999999999,
      "total_signals": 66,
      "long_signals": 32,
      "short_signals": 34,
      "signal_ratio": 0.008707124010554089,
      "accuracy": 0.6986807387862797
    },
    {
      "threshold": 0.7,
      "total_signals": 2,
      "long_signals": 2,
      "short_signals": 0,
      "signal_ratio": 0.0002638522427440633,
      "accuracy": 0.6963060686015831
    },
    {
      "threshold": 0.7499999999999999,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.696042216358839
    },
    {
      "threshold": 0.7999999999999998,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.696042216358839
    }
  ],
  "best_params": {
    "n_estimators": 92,
    "max_depth": 15,
    "min_samples_split": 47,
    "min_samples_leaf": 11,
    "thr_long": 0.4525773325027377,
    "thr_short": 0.5377508998490924,
    "min_confidence": 0.07396603715821673,
    "stop_mult": 0.6895258559489582,
    "take_mult": 2.012374746332116
  },
  "config": {
    "session_config": {
      "prebuffer_min": 45,
      "session_len_min": 45,
      "volatility_window": 10,
      "zscore_window_days": 3,
      "volatility_threshold": 1.8,
      "cooldown_min": 30
    },
    "sim_config": {
      "commission": 0.001,
      "spread_pct": 0.0002,
      "risk_per_trade": 0.01,
      "max_position_pct": 0.1,
      "default_stop_pct": 0.005,
      "default_take_pct": 0.015,
      "max_hold_minutes": 30,
      "min_hold_bars": 3
    }
  }
}