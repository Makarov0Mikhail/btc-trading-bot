{
  "horizon": 10,
  "timestamp": "20251218_012655",
  "metrics": {
    "long_accuracy": 0.769875451053428,
    "short_accuracy": 0.8149807938540333,
    "long_precision": 0.25311475409836065,
    "short_precision": 0.4722222222222222,
    "long_recall": 0.12058731646360513,
    "short_recall": 0.0053509600251809885,
    "long_f1": 0.16335167160389336,
    "short_f1": 0.010582010582010581
  },
  "financial": {
    "pnl": -25.92448775006342,
    "sharpe": 39.742760876932124,
    "max_drawdown": 75.35043355501058
  },
  "feature_analysis": {
    "long_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.2684065962113935,
          "mutual_info": 0.006925699513796513,
          "abs_correlation": 0.03379073157177336
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.12529985820882264,
          "mutual_info": 0.005840017203462722,
          "abs_correlation": 0.02539152846586131
        },
        {
          "feature": "sma_7",
          "importance": 0.10241420358169963,
          "mutual_info": 0.005228817492173077,
          "abs_correlation": 0.020811790498981332
        },
        {
          "feature": "log_return",
          "importance": 0.07499726899721307,
          "mutual_info": 0.0014493277519234127,
          "abs_correlation": 0.01442352040791242
        },
        {
          "feature": "macd_hist",
          "importance": 0.06309438461048038,
          "mutual_info": 0.0,
          "abs_correlation": 0.011337432152909534
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.06069281780382289,
          "mutual_info": 0.0026401743697470614,
          "abs_correlation": 0.03261175198940797
        },
        {
          "feature": "rsi_14",
          "importance": 0.05946182805567729,
          "mutual_info": 0.00524520138154938,
          "abs_correlation": 0.0206566766823978
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.048269720247350635,
          "mutual_info": 0.01043837134167358,
          "abs_correlation": 0.11669112319913297
        },
        {
          "feature": "volume_change",
          "importance": 0.04440131222063025,
          "mutual_info": 0.025092250059994825,
          "abs_correlation": 0.0802374152581831
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.04320598586765479,
          "mutual_info": 0.0217759439384424,
          "abs_correlation": 0.16835844815208345
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.2684065962113935,
        "min_importance": 0.006046582674459984,
        "mean_importance": 0.07142857142857144
      }
    },
    "short_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.17567165706145155,
          "mutual_info": 0.002479105137388915,
          "abs_correlation": 0.01733702383422339
        },
        {
          "feature": "sma_7",
          "importance": 0.15795269256649327,
          "mutual_info": 0.004579538284201989,
          "abs_correlation": 0.013213051329808908
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.11114204228166287,
          "mutual_info": 0.001306826217797541,
          "abs_correlation": 0.008231064365122779
        },
        {
          "feature": "rsi_14",
          "importance": 0.07106000376854125,
          "mutual_info": 0.0029531416875210326,
          "abs_correlation": 0.03538102604065226
        },
        {
          "feature": "macd_hist",
          "importance": 0.0705330920665166,
          "mutual_info": 0.0006063301871253035,
          "abs_correlation": 0.03192771408599976
        },
        {
          "feature": "log_return",
          "importance": 0.06247785011743054,
          "mutual_info": 0.0,
          "abs_correlation": 0.01794308490448036
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.058668537325052623,
          "mutual_info": 0.0013265891941232066,
          "abs_correlation": 0.00836820525468705
        },
        {
          "feature": "hour_sin",
          "importance": 0.055591908571587745,
          "mutual_info": 0.009126604358844492,
          "abs_correlation": 0.0865580250330122
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.04723982284996592,
          "mutual_info": 0.025058484135292103,
          "abs_correlation": 0.09735087894039794
        },
        {
          "feature": "volume_change",
          "importance": 0.04683161410147816,
          "mutual_info": 0.011563461596633351,
          "abs_correlation": 0.11134109518928197
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.17567165706145155,
        "min_importance": 0.010128184518127059,
        "mean_importance": 0.07142857142857144
      }
    }
  },
  "trades_detailed": {
    "summary": {
      "total_trades": 383,
      "winning_trades": 184,
      "losing_trades": 199,
      "win_rate": 0.4804177545691906,
      "avg_win_pct": 0.003506067650953146,
      "avg_loss_pct": -0.0033494654402566504,
      "profit_factor": 0.3758993851990815,
      "largest_win_pct": 0.027098263916997878,
      "largest_loss_pct": -0.031297652454404856,
      "avg_holding_minutes": 28.514360313315926
    },
    "by_direction": {
      "long": {
        "total_trades": 367,
        "winning_trades": 174,
        "losing_trades": 193,
        "win_rate": 0.47411444141689374,
        "avg_win_pct": 0.0034903543934861367,
        "avg_loss_pct": -0.0031694922258674076,
        "profit_factor": 0.37861542319119734,
        "largest_win_pct": 0.027098263916997878,
        "largest_loss_pct": -0.028394343853498483,
        "avg_holding_minutes": 26.899182561307903
      },
      "short": {
        "total_trades": 16,
        "winning_trades": 10,
        "losing_trades": 6,
        "win_rate": 0.625,
        "avg_win_pct": 0.0037794783308791047,
        "avg_loss_pct": -0.009138603836443973,
        "profit_factor": 0.34186230035013865,
        "largest_win_pct": 0.00900952965571955,
        "largest_loss_pct": -0.031297652454404856,
        "avg_holding_minutes": 65.5625
      },
      "total_trades": 383,
      "long_count": 367,
      "short_count": 16
    },
    "holding_time_stats": {
      "mean": 28.514360313315926,
      "median": 10.0,
      "min": 1.0,
      "max": 1524.0,
      "std": 109.07239638327029
    },
    "exit_reasons": {
      "HORIZON_EXIT": 279,
      "STOP_LOSS": 51,
      "TAKE_PROFIT": 30,
      "MAX_HOLD": 23
    },
    "hourly_performance": {
      "18": {
        "avg_pnl": -5.27612481879406,
        "win_rate": 0.35294117647058826,
        "total_trades": 17,
        "total_pnl": -89.69412191949903
      },
      "6": {
        "avg_pnl": -7.828141545487763,
        "win_rate": 0.4,
        "total_trades": 10,
        "total_pnl": -78.28141545487763
      },
      "4": {
        "avg_pnl": -0.9773107033484301,
        "win_rate": 0.4,
        "total_trades": 15,
        "total_pnl": -14.659660550226452
      },
      "17": {
        "avg_pnl": -6.536509713914932,
        "win_rate": 0.2727272727272727,
        "total_trades": 22,
        "total_pnl": -143.8032137061285
      },
      "12": {
        "avg_pnl": -1.1846248212760173,
        "win_rate": 0.3333333333333333,
        "total_trades": 9,
        "total_pnl": -10.661623391484156
      },
      "14": {
        "avg_pnl": -10.896717035178016,
        "win_rate": 0.3333333333333333,
        "total_trades": 42,
        "total_pnl": -457.6621154774767
      },
      "16": {
        "avg_pnl": -7.361490488835636,
        "win_rate": 0.28205128205128205,
        "total_trades": 39,
        "total_pnl": -287.0981290645898
      },
      "2": {
        "avg_pnl": -8.920928390161164,
        "win_rate": 0.21052631578947367,
        "total_trades": 19,
        "total_pnl": -169.4976394130621
      },
      "5": {
        "avg_pnl": -9.859165241718516,
        "win_rate": 0.25,
        "total_trades": 8,
        "total_pnl": -78.87332193374813
      },
      "9": {
        "avg_pnl": -2.845066326331805,
        "win_rate": 0.45454545454545453,
        "total_trades": 11,
        "total_pnl": -31.295729589649852
      },
      "13": {
        "avg_pnl": -4.783023609331346,
        "win_rate": 0.4444444444444444,
        "total_trades": 18,
        "total_pnl": -86.09442496796423
      },
      "15": {
        "avg_pnl": -11.497505196599015,
        "win_rate": 0.2903225806451613,
        "total_trades": 31,
        "total_pnl": -356.42266109456943
      },
      "19": {
        "avg_pnl": -9.073337511225269,
        "win_rate": 0.24,
        "total_trades": 25,
        "total_pnl": -226.83343778063173
      },
      "1": {
        "avg_pnl": 1.8053795331601001,
        "win_rate": 0.45454545454545453,
        "total_trades": 11,
        "total_pnl": 19.8591748647611
      },
      "3": {
        "avg_pnl": 2.9248971904079455,
        "win_rate": 0.5,
        "total_trades": 12,
        "total_pnl": 35.09876628489535
      },
      "7": {
        "avg_pnl": -21.661607220578638,
        "win_rate": 0.14285714285714285,
        "total_trades": 7,
        "total_pnl": -151.63125054405046
      },
      "20": {
        "avg_pnl": 2.4986583815228953,
        "win_rate": 0.47058823529411764,
        "total_trades": 17,
        "total_pnl": 42.47719248588922
      },
      "21": {
        "avg_pnl": -1.265432551225999,
        "win_rate": 0.4166666666666667,
        "total_trades": 12,
        "total_pnl": -15.185190614711987
      },
      "22": {
        "avg_pnl": -11.408680195374314,
        "win_rate": 0.38461538461538464,
        "total_trades": 13,
        "total_pnl": -148.3128425398661
      },
      "11": {
        "avg_pnl": -2.935946577694601,
        "win_rate": 0.45454545454545453,
        "total_trades": 11,
        "total_pnl": -32.29541235464061
      },
      "8": {
        "avg_pnl": -10.134527230286194,
        "win_rate": 0.25,
        "total_trades": 12,
        "total_pnl": -121.61432676343433
      },
      "10": {
        "avg_pnl": -7.139094571191101,
        "win_rate": 0.16666666666666666,
        "total_trades": 6,
        "total_pnl": -42.8345674271466
      },
      "0": {
        "avg_pnl": -9.22669289781655,
        "win_rate": 0.5,
        "total_trades": 8,
        "total_pnl": -73.8135431825324
      },
      "23": {
        "avg_pnl": -9.164910108953228,
        "win_rate": 0.125,
        "total_trades": 8,
        "total_pnl": -73.31928087162582
      }
    },
    "confidence_quartiles": {
      "Q1": {
        "avg_pnl": -8.714279655865747,
        "win_rate": 0.3645833333333333,
        "avg_confidence": -0.0006238577371888444,
        "trades": 96
      },
      "Q2": {
        "avg_pnl": -5.64678152555994,
        "win_rate": 0.2916666666666667,
        "avg_confidence": 0.034211526503668516,
        "trades": 96
      },
      "Q3": {
        "avg_pnl": -6.166579872739585,
        "win_rate": 0.30526315789473685,
        "avg_confidence": 0.047551991942540145,
        "trades": 95
      },
      "Q4": {
        "avg_pnl": -6.541268892492124,
        "win_rate": 0.375,
        "avg_confidence": 0.080725011617915,
        "trades": 96
      }
    }
  },
  "threshold_sensitivity": [
    {
      "threshold": 0.3,
      "total_signals": 545,
      "long_signals": 0,
      "short_signals": 545,
      "signal_ratio": 0.031719241066232105,
      "accuracy": 0.6063904085671051
    },
    {
      "threshold": 0.35,
      "total_signals": 1352,
      "long_signals": 66,
      "short_signals": 1286,
      "signal_ratio": 0.07868699802118496,
      "accuracy": 0.5751367710394599
    },
    {
      "threshold": 0.39999999999999997,
      "total_signals": 2745,
      "long_signals": 491,
      "short_signals": 2254,
      "signal_ratio": 0.15976021417762776,
      "accuracy": 0.5442323361657548
    },
    {
      "threshold": 0.44999999999999996,
      "total_signals": 3715,
      "long_signals": 682,
      "short_signals": 3033,
      "signal_ratio": 0.21621464323128856,
      "accuracy": 0.5527296007449657
    },
    {
      "threshold": 0.49999999999999994,
      "total_signals": 2635,
      "long_signals": 1067,
      "short_signals": 1568,
      "signal_ratio": 0.15335816552205797,
      "accuracy": 0.600104760796182
    },
    {
      "threshold": 0.5499999999999999,
      "total_signals": 1881,
      "long_signals": 543,
      "short_signals": 1338,
      "signal_ratio": 0.10947503201024328,
      "accuracy": 0.6319986031893843
    },
    {
      "threshold": 0.5999999999999999,
      "total_signals": 772,
      "long_signals": 300,
      "short_signals": 472,
      "signal_ratio": 0.0449307414736352,
      "accuracy": 0.6389244558258643
    },
    {
      "threshold": 0.6499999999999999,
      "total_signals": 61,
      "long_signals": 51,
      "short_signals": 10,
      "signal_ratio": 0.003550226981725061,
      "accuracy": 0.63001978815039
    },
    {
      "threshold": 0.7,
      "total_signals": 2,
      "long_signals": 2,
      "short_signals": 0,
      "signal_ratio": 0.00011640088464672332,
      "accuracy": 0.6289139797462461
    },
    {
      "threshold": 0.7499999999999999,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.6287975788615994
    },
    {
      "threshold": 0.7999999999999998,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.6287975788615994
    }
  ],
  "best_params": {
    "n_estimators": 97,
    "max_depth": 6,
    "min_samples_split": 31,
    "min_samples_leaf": 18,
    "thr_long": 0.5039467710280732,
    "thr_short": 0.6038522831113528,
    "min_confidence": 0.0221590938657574,
    "stop_mult": 1.1269359665092193,
    "take_mult": 1.0128916230113103,
    "trailing_mult": 0.7609893078453853,
    "breakeven_mult": 0.3978404567096816
  },
  "config": {
    "session_config": {
      "prebuffer_min": 45,
      "session_len_min": 45,
      "volatility_window": 10,
      "zscore_window_days": 3,
      "volatility_threshold": 1.8,
      "cooldown_min": 30
    },
    "sim_config": {
      "commission": 0.001,
      "spread_pct": 0.0002,
      "risk_per_trade": 0.2,
      "max_position_pct": 0.5,
      "default_stop_pct": 0.005,
      "default_take_pct": 0.015,
      "max_hold_minutes": 30,
      "min_hold_bars": 3
    }
  }
}