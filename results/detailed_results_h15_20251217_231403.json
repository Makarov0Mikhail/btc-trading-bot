{
  "horizon": 15,
  "timestamp": "20251217_231403",
  "metrics": {
    "long_accuracy": 0.8543301759133964,
    "short_accuracy": 0.7411366711772666,
    "long_precision": 0.1111111111111111,
    "short_precision": 0.2202785876255264,
    "long_recall": 0.00046598322460391424,
    "short_recall": 0.3239637922820391,
    "long_f1": 0.0009280742459396752,
    "short_f1": 0.26224450443501734
  },
  "financial": {
    "pnl": 2.3636800300570693,
    "sharpe": 7.581634502600098,
    "max_drawdown": 23.16274137264534
  },
  "feature_analysis": {
    "long_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.2870319835316739,
          "mutual_info": 0.006847707063031727,
          "abs_correlation": 0.023735262516078187
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.14615303015695766,
          "mutual_info": 0.0059791501827102245,
          "abs_correlation": 0.019551936283263665
        },
        {
          "feature": "log_return",
          "importance": 0.08170504035750623,
          "mutual_info": 0.0067979205955635,
          "abs_correlation": 0.01773014041611684
        },
        {
          "feature": "macd_hist",
          "importance": 0.08082496434910938,
          "mutual_info": 0.0,
          "abs_correlation": 0.016323330226594747
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.07648599510695268,
          "mutual_info": 0.0004504745749982497,
          "abs_correlation": 0.0023432960029551187
        },
        {
          "feature": "rsi_14",
          "importance": 0.057628775135323655,
          "mutual_info": 0.0003871041704792688,
          "abs_correlation": 0.03685416733842849
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.04952073799152869,
          "mutual_info": 0.006793328912484631,
          "abs_correlation": 0.0175271903051269
        },
        {
          "feature": "volume_change",
          "importance": 0.04827954230552308,
          "mutual_info": 0.011312795397167452,
          "abs_correlation": 0.13456756458384408
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.04776620661416837,
          "mutual_info": 0.023240954394492697,
          "abs_correlation": 0.18583830594453596
        },
        {
          "feature": "log_return_lag_2",
          "importance": 0.047755208604300804,
          "mutual_info": 0.002605549715189559,
          "abs_correlation": 0.03604354412282884
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.2870319835316739,
        "min_importance": 0.008585972911623937,
        "mean_importance": 0.07692307692307694
      }
    },
    "short_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.23048122096663104,
          "mutual_info": 0.0027650972456987333,
          "abs_correlation": 0.013825149762860318
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.11344076131479432,
          "mutual_info": 0.002312994084430642,
          "abs_correlation": 0.014178606720437682
        },
        {
          "feature": "macd_hist",
          "importance": 0.0949673541891973,
          "mutual_info": 0.00026159278668580477,
          "abs_correlation": 0.010709684562613573
        },
        {
          "feature": "rsi_14",
          "importance": 0.07734094249039913,
          "mutual_info": 0.0023156236503334426,
          "abs_correlation": 0.03627178075543437
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.07214847776269631,
          "mutual_info": 0.0003847306770488057,
          "abs_correlation": 0.02512950235997667
        },
        {
          "feature": "hour_sin",
          "importance": 0.07054181893957105,
          "mutual_info": 0.0,
          "abs_correlation": 0.01997639702800051
        },
        {
          "feature": "log_return",
          "importance": 0.06536523917070845,
          "mutual_info": 0.00016937837577435388,
          "abs_correlation": 0.010849411935739317
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.061456034404331554,
          "mutual_info": 0.008594230551675519,
          "abs_correlation": 0.0851440055465387
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.051101027861923096,
          "mutual_info": 0.010899081896031504,
          "abs_correlation": 0.11019698436232978
        },
        {
          "feature": "volume_change",
          "importance": 0.05094736012780926,
          "mutual_info": 0.002623836629083831,
          "abs_correlation": 0.01894983190218393
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.23048122096663104,
        "min_importance": 0.014338427999795612,
        "mean_importance": 0.07692307692307691
      }
    }
  },
  "trades_detailed": {
    "summary": {
      "total_trades": 512,
      "winning_trades": 244,
      "losing_trades": 268,
      "win_rate": 0.4765625,
      "avg_win_pct": 0.0049559339936513435,
      "avg_loss_pct": -0.00425344237839793,
      "profit_factor": 0.5355450100083837,
      "largest_win_pct": 0.04266540702893051,
      "largest_loss_pct": -0.0220471823399363,
      "avg_holding_minutes": 63.256360078277886
    },
    "by_direction": {
      "long": {
        "total_trades": 3,
        "winning_trades": 1,
        "losing_trades": 2,
        "win_rate": 0.3333333333333333,
        "avg_win_pct": 0.007201911711847808,
        "avg_loss_pct": -0.0009031398780083855,
        "profit_factor": 1.2416592441047236,
        "largest_win_pct": 0.007201911711847808,
        "largest_loss_pct": -0.0017145053117842979,
        "avg_holding_minutes": 34.333333333333336
      },
      "short": {
        "total_trades": 509,
        "winning_trades": 243,
        "losing_trades": 266,
        "win_rate": 0.4774066797642436,
        "avg_win_pct": 0.004946691286992098,
        "avg_loss_pct": -0.004278632622761761,
        "profit_factor": 0.5333879919926745,
        "largest_win_pct": 0.04266540702893051,
        "largest_loss_pct": -0.0220471823399363,
        "avg_holding_minutes": 63.42716535433071
      },
      "total_trades": 512,
      "long_count": 3,
      "short_count": 509
    },
    "holding_time_stats": {
      "mean": 63.1328125,
      "median": 15.0,
      "min": 0.0,
      "max": 1537.0,
      "std": 153.60575658024618
    },
    "exit_reasons": {
      "HORIZON_EXIT": 275,
      "MAX_HOLD": 86,
      "STOP_LOSS": 86,
      "TAKE_PROFIT": 64,
      "FORCE_CLOSE": 1
    },
    "hourly_performance": {
      "18": {
        "avg_pnl": -0.3912634312817759,
        "win_rate": 0.4838709677419355,
        "total_trades": 31,
        "total_pnl": -12.129166369735053
      },
      "19": {
        "avg_pnl": -1.806191358701945,
        "win_rate": 0.2962962962962963,
        "total_trades": 27,
        "total_pnl": -48.767166684952514
      },
      "23": {
        "avg_pnl": -2.772688381389248,
        "win_rate": 0.29411764705882354,
        "total_trades": 17,
        "total_pnl": -47.135702483617216
      },
      "14": {
        "avg_pnl": -0.14073527926067328,
        "win_rate": 0.4057971014492754,
        "total_trades": 69,
        "total_pnl": -9.710734268986457
      },
      "0": {
        "avg_pnl": -0.8298152463490587,
        "win_rate": 0.35135135135135137,
        "total_trades": 37,
        "total_pnl": -30.70316411491517
      },
      "12": {
        "avg_pnl": -0.5849929213600263,
        "win_rate": 0.7,
        "total_trades": 10,
        "total_pnl": -5.849929213600263
      },
      "17": {
        "avg_pnl": -1.455067062523337,
        "win_rate": 0.375,
        "total_trades": 48,
        "total_pnl": -69.84321900112018
      },
      "22": {
        "avg_pnl": -1.216988701578243,
        "win_rate": 0.42105263157894735,
        "total_trades": 19,
        "total_pnl": -23.122785329986616
      },
      "13": {
        "avg_pnl": -1.529271483094663,
        "win_rate": 0.4186046511627907,
        "total_trades": 43,
        "total_pnl": -65.75867377307051
      },
      "15": {
        "avg_pnl": -0.7820342881559562,
        "win_rate": 0.3673469387755102,
        "total_trades": 49,
        "total_pnl": -38.31968011964185
      },
      "2": {
        "avg_pnl": -0.5175228313234558,
        "win_rate": 0.42857142857142855,
        "total_trades": 7,
        "total_pnl": -3.6226598192641903
      },
      "4": {
        "avg_pnl": -1.3199420453911428,
        "win_rate": 0.3333333333333333,
        "total_trades": 9,
        "total_pnl": -11.879478408520285
      },
      "9": {
        "avg_pnl": -7.505597910747117,
        "win_rate": 0.0,
        "total_trades": 2,
        "total_pnl": -15.011195821494233
      },
      "16": {
        "avg_pnl": -2.4606707051234205,
        "win_rate": 0.3673469387755102,
        "total_trades": 49,
        "total_pnl": -120.5728645510476
      },
      "21": {
        "avg_pnl": -3.276647513280419,
        "win_rate": 0.17647058823529413,
        "total_trades": 17,
        "total_pnl": -55.70300772576712
      },
      "20": {
        "avg_pnl": -1.8896843891506563,
        "win_rate": 0.3333333333333333,
        "total_trades": 27,
        "total_pnl": -51.02147850706772
      },
      "1": {
        "avg_pnl": 0.1709645154619325,
        "win_rate": 0.46153846153846156,
        "total_trades": 26,
        "total_pnl": 4.445077402010245
      },
      "3": {
        "avg_pnl": -4.315682532723721,
        "win_rate": 0.0,
        "total_trades": 5,
        "total_pnl": -21.578412663618604
      },
      "11": {
        "avg_pnl": -3.9553327359710932,
        "win_rate": 0.125,
        "total_trades": 8,
        "total_pnl": -31.642661887768746
      },
      "7": {
        "avg_pnl": 0.2458416172106405,
        "win_rate": 0.3333333333333333,
        "total_trades": 3,
        "total_pnl": 0.7375248516319215
      },
      "8": {
        "avg_pnl": -5.275833523257066,
        "win_rate": 0.0,
        "total_trades": 4,
        "total_pnl": -21.103334093028263
      },
      "10": {
        "avg_pnl": -5.252086094671824,
        "win_rate": 0.0,
        "total_trades": 2,
        "total_pnl": -10.504172189343649
      },
      "5": {
        "avg_pnl": 4.695666102910287,
        "win_rate": 1.0,
        "total_trades": 1,
        "total_pnl": 4.695666102910287
      },
      "6": {
        "avg_pnl": -5.521250207492053,
        "win_rate": 0.0,
        "total_trades": 2,
        "total_pnl": -11.042500414984106
      }
    },
    "confidence_quartiles": {
      "Q1": {
        "avg_pnl": -1.3282607436595453,
        "win_rate": 0.3359375,
        "avg_confidence": -0.17572360450604207,
        "trades": 128
      },
      "Q2": {
        "avg_pnl": -1.4064830283495369,
        "win_rate": 0.40625,
        "avg_confidence": -0.08465982467626063,
        "trades": 128
      },
      "Q3": {
        "avg_pnl": -1.4139347069490524,
        "win_rate": 0.40625,
        "avg_confidence": -0.04301766033633907,
        "trades": 128
      },
      "Q4": {
        "avg_pnl": -1.2821318263932553,
        "win_rate": 0.328125,
        "avg_confidence": -0.009775959295173213,
        "trades": 128
      }
    }
  },
  "threshold_sensitivity": [
    {
      "threshold": 0.3,
      "total_signals": 3358,
      "long_signals": 1012,
      "short_signals": 2346,
      "signal_ratio": 0.22719891745602164,
      "accuracy": 0.5613667117726657
    },
    {
      "threshold": 0.35,
      "total_signals": 3664,
      "long_signals": 982,
      "short_signals": 2682,
      "signal_ratio": 0.24790257104194857,
      "accuracy": 0.573274695534506
    },
    {
      "threshold": 0.39999999999999997,
      "total_signals": 3522,
      "long_signals": 1173,
      "short_signals": 2349,
      "signal_ratio": 0.23829499323410014,
      "accuracy": 0.6052097428958051
    },
    {
      "threshold": 0.44999999999999996,
      "total_signals": 2742,
      "long_signals": 1132,
      "short_signals": 1610,
      "signal_ratio": 0.1855209742895805,
      "accuracy": 0.6524357239512856
    },
    {
      "threshold": 0.49999999999999994,
      "total_signals": 1922,
      "long_signals": 806,
      "short_signals": 1116,
      "signal_ratio": 0.13004059539918808,
      "accuracy": 0.6862652232746955
    },
    {
      "threshold": 0.5499999999999999,
      "total_signals": 1375,
      "long_signals": 690,
      "short_signals": 685,
      "signal_ratio": 0.09303112313937753,
      "accuracy": 0.7077131258457375
    },
    {
      "threshold": 0.5999999999999999,
      "total_signals": 684,
      "long_signals": 445,
      "short_signals": 239,
      "signal_ratio": 0.0462787550744249,
      "accuracy": 0.7161705006765899
    },
    {
      "threshold": 0.6499999999999999,
      "total_signals": 215,
      "long_signals": 183,
      "short_signals": 32,
      "signal_ratio": 0.014546684709066306,
      "accuracy": 0.7163734776725305
    },
    {
      "threshold": 0.7,
      "total_signals": 46,
      "long_signals": 42,
      "short_signals": 4,
      "signal_ratio": 0.0031123139377537213,
      "accuracy": 0.7141407307171854
    },
    {
      "threshold": 0.7499999999999999,
      "total_signals": 3,
      "long_signals": 3,
      "short_signals": 0,
      "signal_ratio": 0.00020297699594046007,
      "accuracy": 0.7128552097428958
    },
    {
      "threshold": 0.7999999999999998,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.7127875507442489
    }
  ],
  "best_params": {
    "n_estimators": 167,
    "max_depth": 15,
    "min_samples_split": 36,
    "min_samples_leaf": 30,
    "thr_long": 0.6646763560236382,
    "thr_short": 0.4556944015356565,
    "min_confidence": 0.0013260373457081415,
    "stop_mult": 1.187066766649155,
    "take_mult": 1.0166613116115923
  },
  "config": {
    "session_config": {
      "prebuffer_min": 45,
      "session_len_min": 45,
      "volatility_window": 10,
      "zscore_window_days": 3,
      "volatility_threshold": 1.8,
      "cooldown_min": 30
    },
    "sim_config": {
      "commission": 0.001,
      "spread_pct": 0.0002,
      "risk_per_trade": 0.01,
      "max_position_pct": 0.1,
      "default_stop_pct": 0.005,
      "default_take_pct": 0.015,
      "max_hold_minutes": 30,
      "min_hold_bars": 3
    }
  }
}