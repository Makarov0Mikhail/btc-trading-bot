{
  "horizon": 15,
  "timestamp": "20251218_001339",
  "metrics": {
    "long_accuracy": 0.8534506089309878,
    "short_accuracy": 0.8020974289580515,
    "long_precision": 0.3148148148148148,
    "short_precision": 0.22864651773981604,
    "long_recall": 0.007921714818266543,
    "short_recall": 0.16579323487374942,
    "long_f1": 0.015454545454545455,
    "short_f1": 0.19221209610604806
  },
  "financial": {
    "pnl": 8.801392914856997,
    "sharpe": 6.268924569396988,
    "max_drawdown": 19.913173515174716
  },
  "feature_analysis": {
    "long_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.2870319835316739,
          "mutual_info": 0.006847707063031727,
          "abs_correlation": 0.023735262516078187
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.14615303015695766,
          "mutual_info": 0.0059791501827102245,
          "abs_correlation": 0.019551936283263665
        },
        {
          "feature": "log_return",
          "importance": 0.08170504035750623,
          "mutual_info": 0.0067979205955635,
          "abs_correlation": 0.01773014041611684
        },
        {
          "feature": "macd_hist",
          "importance": 0.08082496434910938,
          "mutual_info": 0.0,
          "abs_correlation": 0.016323330226594747
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.07648599510695268,
          "mutual_info": 0.0004504745749982497,
          "abs_correlation": 0.0023432960029551187
        },
        {
          "feature": "rsi_14",
          "importance": 0.057628775135323655,
          "mutual_info": 0.0003871041704792688,
          "abs_correlation": 0.03685416733842849
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.04952073799152869,
          "mutual_info": 0.006793328912484631,
          "abs_correlation": 0.0175271903051269
        },
        {
          "feature": "volume_change",
          "importance": 0.04827954230552308,
          "mutual_info": 0.011312795397167452,
          "abs_correlation": 0.13456756458384408
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.04776620661416837,
          "mutual_info": 0.023240954394492697,
          "abs_correlation": 0.18583830594453596
        },
        {
          "feature": "log_return_lag_2",
          "importance": 0.047755208604300804,
          "mutual_info": 0.002605549715189559,
          "abs_correlation": 0.03604354412282884
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.2870319835316739,
        "min_importance": 0.008585972911623937,
        "mean_importance": 0.07692307692307694
      }
    },
    "short_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.23048122096663104,
          "mutual_info": 0.0027650972456987333,
          "abs_correlation": 0.013825149762860318
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.11344076131479432,
          "mutual_info": 0.002312994084430642,
          "abs_correlation": 0.014178606720437682
        },
        {
          "feature": "macd_hist",
          "importance": 0.0949673541891973,
          "mutual_info": 0.00026159278668580477,
          "abs_correlation": 0.010709684562613573
        },
        {
          "feature": "rsi_14",
          "importance": 0.07734094249039913,
          "mutual_info": 0.0023156236503334426,
          "abs_correlation": 0.03627178075543437
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.07214847776269631,
          "mutual_info": 0.0003847306770488057,
          "abs_correlation": 0.02512950235997667
        },
        {
          "feature": "hour_sin",
          "importance": 0.07054181893957105,
          "mutual_info": 0.0,
          "abs_correlation": 0.01997639702800051
        },
        {
          "feature": "log_return",
          "importance": 0.06536523917070845,
          "mutual_info": 0.00016937837577435388,
          "abs_correlation": 0.010849411935739317
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.061456034404331554,
          "mutual_info": 0.008594230551675519,
          "abs_correlation": 0.0851440055465387
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.051101027861923096,
          "mutual_info": 0.010899081896031504,
          "abs_correlation": 0.11019698436232978
        },
        {
          "feature": "volume_change",
          "importance": 0.05094736012780926,
          "mutual_info": 0.002623836629083831,
          "abs_correlation": 0.01894983190218393
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.23048122096663104,
        "min_importance": 0.014338427999795612,
        "mean_importance": 0.07692307692307691
      }
    }
  },
  "trades_detailed": {
    "summary": {
      "total_trades": 329,
      "winning_trades": 174,
      "losing_trades": 155,
      "win_rate": 0.5288753799392097,
      "avg_win_pct": 0.005545143921057324,
      "avg_loss_pct": -0.003660628923840642,
      "profit_factor": 0.863309552555428,
      "largest_win_pct": 0.04391962576814201,
      "largest_loss_pct": -0.017735144254359625,
      "avg_holding_minutes": 55.5640243902439
    },
    "by_direction": {
      "long": {
        "total_trades": 30,
        "winning_trades": 15,
        "losing_trades": 15,
        "win_rate": 0.5,
        "avg_win_pct": 0.006144262247410071,
        "avg_loss_pct": -0.0028886672287636935,
        "profit_factor": 1.0574055551930819,
        "largest_win_pct": 0.016770096842565252,
        "largest_loss_pct": -0.010408005638203766,
        "avg_holding_minutes": 69.03333333333333
      },
      "short": {
        "total_trades": 299,
        "winning_trades": 159,
        "losing_trades": 140,
        "win_rate": 0.5317725752508361,
        "avg_win_pct": 0.005488623324231593,
        "avg_loss_pct": -0.003743339105456029,
        "profit_factor": 0.8459758864169603,
        "largest_win_pct": 0.04391962576814201,
        "largest_loss_pct": -0.017735144254359625,
        "avg_holding_minutes": 54.20805369127517
      },
      "total_trades": 329,
      "long_count": 30,
      "short_count": 299
    },
    "holding_time_stats": {
      "mean": 55.3951367781155,
      "median": 15.0,
      "min": 0.0,
      "max": 1246.0,
      "std": 136.44147271951013
    },
    "exit_reasons": {
      "TAKE_PROFIT": 59,
      "MAX_HOLD": 52,
      "HORIZON_EXIT": 166,
      "STOP_LOSS": 51,
      "FORCE_CLOSE": 1
    },
    "hourly_performance": {
      "18": {
        "avg_pnl": 0.8077260591695642,
        "win_rate": 0.5217391304347826,
        "total_trades": 23,
        "total_pnl": 18.577699360899977
      },
      "19": {
        "avg_pnl": -1.3205405100725047,
        "win_rate": 0.35,
        "total_trades": 20,
        "total_pnl": -26.410810201450094
      },
      "6": {
        "avg_pnl": -0.5251309718365246,
        "win_rate": 0.2,
        "total_trades": 5,
        "total_pnl": -2.6256548591826228
      },
      "12": {
        "avg_pnl": 0.06156733174386394,
        "win_rate": 0.8333333333333334,
        "total_trades": 6,
        "total_pnl": 0.3694039904631836
      },
      "14": {
        "avg_pnl": 1.0554816335740191,
        "win_rate": 0.475,
        "total_trades": 40,
        "total_pnl": 42.21926534296077
      },
      "13": {
        "avg_pnl": -0.15577808886394967,
        "win_rate": 0.5161290322580645,
        "total_trades": 31,
        "total_pnl": -4.82912075478244
      },
      "0": {
        "avg_pnl": -1.637346851372593,
        "win_rate": 0.3157894736842105,
        "total_trades": 19,
        "total_pnl": -31.10959017607927
      },
      "15": {
        "avg_pnl": 0.2126344336912374,
        "win_rate": 0.34375,
        "total_trades": 32,
        "total_pnl": 6.804301878119597
      },
      "16": {
        "avg_pnl": -0.762277860249366,
        "win_rate": 0.34285714285714286,
        "total_trades": 35,
        "total_pnl": -26.67972510872781
      },
      "17": {
        "avg_pnl": -0.7611525502311699,
        "win_rate": 0.4444444444444444,
        "total_trades": 36,
        "total_pnl": -27.401491808322117
      },
      "2": {
        "avg_pnl": -3.210812277099733,
        "win_rate": 0.25,
        "total_trades": 4,
        "total_pnl": -12.843249108398933
      },
      "9": {
        "avg_pnl": -2.5676094230549356,
        "win_rate": 0.0,
        "total_trades": 2,
        "total_pnl": -5.135218846109871
      },
      "7": {
        "avg_pnl": -1.164958283835884,
        "win_rate": 0.5,
        "total_trades": 2,
        "total_pnl": -2.329916567671768
      },
      "20": {
        "avg_pnl": -1.4144125468622721,
        "win_rate": 0.35,
        "total_trades": 20,
        "total_pnl": -28.288250937245444
      },
      "21": {
        "avg_pnl": -1.3454345053774148,
        "win_rate": 0.125,
        "total_trades": 8,
        "total_pnl": -10.763476043019319
      },
      "22": {
        "avg_pnl": 2.583288357422225,
        "win_rate": 0.7777777777777778,
        "total_trades": 9,
        "total_pnl": 23.249595216800028
      },
      "11": {
        "avg_pnl": -2.4281040329645593,
        "win_rate": 0.14285714285714285,
        "total_trades": 7,
        "total_pnl": -16.996728230751916
      },
      "8": {
        "avg_pnl": 1.9606461156512527,
        "win_rate": 1.0,
        "total_trades": 1,
        "total_pnl": 1.9606461156512527
      },
      "10": {
        "avg_pnl": 1.6012492092629873,
        "win_rate": 0.5,
        "total_trades": 2,
        "total_pnl": 3.2024984185259746
      },
      "4": {
        "avg_pnl": -0.6412930835512393,
        "win_rate": 0.5,
        "total_trades": 2,
        "total_pnl": -1.2825861671024785
      },
      "23": {
        "avg_pnl": -1.5643847904604753,
        "win_rate": 0.5,
        "total_trades": 8,
        "total_pnl": -12.515078323683802
      },
      "1": {
        "avg_pnl": 0.12336474495489706,
        "win_rate": 0.4166666666666667,
        "total_trades": 12,
        "total_pnl": 1.4803769394587647
      },
      "5": {
        "avg_pnl": -6.11026004505613,
        "win_rate": 0.0,
        "total_trades": 2,
        "total_pnl": -12.22052009011226
      },
      "3": {
        "avg_pnl": 4.593889985068547,
        "win_rate": 0.6666666666666666,
        "total_trades": 3,
        "total_pnl": 13.78166995520564
      }
    },
    "confidence_quartiles": {
      "Q1": {
        "avg_pnl": 0.2561747725783298,
        "win_rate": 0.4457831325301205,
        "avg_confidence": -0.10126294879658577,
        "trades": 83
      },
      "Q2": {
        "avg_pnl": -0.675446032221755,
        "win_rate": 0.3780487804878049,
        "avg_confidence": -0.05998446246736245,
        "trades": 82
      },
      "Q3": {
        "avg_pnl": -0.6160792876438468,
        "win_rate": 0.4024390243902439,
        "avg_confidence": -0.044223480249682805,
        "trades": 82
      },
      "Q4": {
        "avg_pnl": -0.30662670609240195,
        "win_rate": 0.43902439024390244,
        "avg_confidence": 0.0321369994674371,
        "trades": 82
      }
    }
  },
  "threshold_sensitivity": [
    {
      "threshold": 0.3,
      "total_signals": 1397,
      "long_signals": 425,
      "short_signals": 972,
      "signal_ratio": 0.09451962110960757,
      "accuracy": 0.642083897158322
    },
    {
      "threshold": 0.35,
      "total_signals": 2661,
      "long_signals": 347,
      "short_signals": 2314,
      "signal_ratio": 0.1800405953991881,
      "accuracy": 0.5903924221921516
    },
    {
      "threshold": 0.39999999999999997,
      "total_signals": 3264,
      "long_signals": 530,
      "short_signals": 2734,
      "signal_ratio": 0.22083897158322058,
      "accuracy": 0.5915426251691475
    },
    {
      "threshold": 0.44999999999999996,
      "total_signals": 2503,
      "long_signals": 756,
      "short_signals": 1747,
      "signal_ratio": 0.16935047361299052,
      "accuracy": 0.6370771312584573
    },
    {
      "threshold": 0.49999999999999994,
      "total_signals": 1820,
      "long_signals": 659,
      "short_signals": 1161,
      "signal_ratio": 0.12313937753721245,
      "accuracy": 0.6817997293640055
    },
    {
      "threshold": 0.5499999999999999,
      "total_signals": 1156,
      "long_signals": 444,
      "short_signals": 712,
      "signal_ratio": 0.07821380243572396,
      "accuracy": 0.7022327469553451
    },
    {
      "threshold": 0.5999999999999999,
      "total_signals": 740,
      "long_signals": 568,
      "short_signals": 172,
      "signal_ratio": 0.05006765899864682,
      "accuracy": 0.7169824086603518
    },
    {
      "threshold": 0.6499999999999999,
      "total_signals": 269,
      "long_signals": 248,
      "short_signals": 21,
      "signal_ratio": 0.018200270635994588,
      "accuracy": 0.7170500676589987
    },
    {
      "threshold": 0.7,
      "total_signals": 27,
      "long_signals": 27,
      "short_signals": 0,
      "signal_ratio": 0.0018267929634641408,
      "accuracy": 0.713531799729364
    },
    {
      "threshold": 0.7499999999999999,
      "total_signals": 2,
      "long_signals": 2,
      "short_signals": 0,
      "signal_ratio": 0.00013531799729364006,
      "accuracy": 0.7129228687415426
    },
    {
      "threshold": 0.7999999999999998,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.7127875507442489
    }
  ],
  "best_params": {
    "n_estimators": 167,
    "max_depth": 7,
    "min_samples_split": 18,
    "min_samples_leaf": 19,
    "thr_long": 0.5819847643808632,
    "thr_short": 0.5011574403293764,
    "min_confidence": 0.030380484721545364,
    "stop_mult": 1.3340464803838608,
    "take_mult": 0.8979349379789682,
    "trailing_mult": 0.6762231018105729,
    "breakeven_mult": 0.3750449614449542
  },
  "config": {
    "session_config": {
      "prebuffer_min": 45,
      "session_len_min": 45,
      "volatility_window": 10,
      "zscore_window_days": 3,
      "volatility_threshold": 1.8,
      "cooldown_min": 30
    },
    "sim_config": {
      "commission": 0.001,
      "spread_pct": 0.0002,
      "risk_per_trade": 0.01,
      "max_position_pct": 0.1,
      "default_stop_pct": 0.005,
      "default_take_pct": 0.015,
      "max_hold_minutes": 30,
      "min_hold_bars": 3
    }
  }
}