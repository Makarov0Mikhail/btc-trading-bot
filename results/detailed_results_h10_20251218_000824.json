{
  "horizon": 10,
  "timestamp": "20251218_000824",
  "metrics": {
    "long_accuracy": 0.7839017576533581,
    "short_accuracy": 0.7841345594226516,
    "long_precision": 0.2552581261950287,
    "short_precision": 0.24423076923076922,
    "long_recall": 0.08341143392689784,
    "short_recall": 0.07994963802329241,
    "long_f1": 0.12573581351542265,
    "short_f1": 0.1204647853924591
  },
  "financial": {
    "pnl": -6.942588111335757,
    "sharpe": 7.158728568524467,
    "max_drawdown": 23.850302863872344
  },
  "feature_analysis": {
    "long_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.2684065962113935,
          "mutual_info": 0.006925699513796513,
          "abs_correlation": 0.03379073157177336
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.12529985820882264,
          "mutual_info": 0.005840017203462722,
          "abs_correlation": 0.02539152846586131
        },
        {
          "feature": "sma_7",
          "importance": 0.10241420358169963,
          "mutual_info": 0.005228817492173077,
          "abs_correlation": 0.020811790498981332
        },
        {
          "feature": "log_return",
          "importance": 0.07499726899721307,
          "mutual_info": 0.0014493277519234127,
          "abs_correlation": 0.01442352040791242
        },
        {
          "feature": "macd_hist",
          "importance": 0.06309438461048038,
          "mutual_info": 0.0,
          "abs_correlation": 0.011337432152909534
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.06069281780382289,
          "mutual_info": 0.0026401743697470614,
          "abs_correlation": 0.03261175198940797
        },
        {
          "feature": "rsi_14",
          "importance": 0.05946182805567729,
          "mutual_info": 0.00524520138154938,
          "abs_correlation": 0.0206566766823978
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.048269720247350635,
          "mutual_info": 0.01043837134167358,
          "abs_correlation": 0.11669112319913297
        },
        {
          "feature": "volume_change",
          "importance": 0.04440131222063025,
          "mutual_info": 0.025092250059994825,
          "abs_correlation": 0.0802374152581831
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.04320598586765479,
          "mutual_info": 0.0217759439384424,
          "abs_correlation": 0.16835844815208345
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.2684065962113935,
        "min_importance": 0.006046582674459984,
        "mean_importance": 0.07142857142857144
      }
    },
    "short_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.17567165706145155,
          "mutual_info": 0.002479105137388915,
          "abs_correlation": 0.01733702383422339
        },
        {
          "feature": "sma_7",
          "importance": 0.15795269256649327,
          "mutual_info": 0.004579538284201989,
          "abs_correlation": 0.013213051329808908
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.11114204228166287,
          "mutual_info": 0.001306826217797541,
          "abs_correlation": 0.008231064365122779
        },
        {
          "feature": "rsi_14",
          "importance": 0.07106000376854125,
          "mutual_info": 0.0029531416875210326,
          "abs_correlation": 0.03538102604065226
        },
        {
          "feature": "macd_hist",
          "importance": 0.0705330920665166,
          "mutual_info": 0.0006063301871253035,
          "abs_correlation": 0.03192771408599976
        },
        {
          "feature": "log_return",
          "importance": 0.06247785011743054,
          "mutual_info": 0.0,
          "abs_correlation": 0.01794308490448036
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.058668537325052623,
          "mutual_info": 0.0013265891941232066,
          "abs_correlation": 0.00836820525468705
        },
        {
          "feature": "hour_sin",
          "importance": 0.055591908571587745,
          "mutual_info": 0.009126604358844492,
          "abs_correlation": 0.0865580250330122
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.04723982284996592,
          "mutual_info": 0.025058484135292103,
          "abs_correlation": 0.09735087894039794
        },
        {
          "feature": "volume_change",
          "importance": 0.04683161410147816,
          "mutual_info": 0.011563461596633351,
          "abs_correlation": 0.11134109518928197
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.17567165706145155,
        "min_importance": 0.010128184518127059,
        "mean_importance": 0.07142857142857144
      }
    }
  },
  "trades_detailed": {
    "summary": {
      "total_trades": 493,
      "winning_trades": 261,
      "losing_trades": 232,
      "win_rate": 0.5294117647058824,
      "avg_win_pct": 0.002905208921524271,
      "avg_loss_pct": -0.0031646172556891684,
      "profit_factor": 0.33656529576892286,
      "largest_win_pct": 0.01791127310942553,
      "largest_loss_pct": -0.023321517375479828,
      "avg_holding_minutes": 23.454361054766736
    },
    "by_direction": {
      "long": {
        "total_trades": 266,
        "winning_trades": 134,
        "losing_trades": 132,
        "win_rate": 0.5037593984962406,
        "avg_win_pct": 0.0030815786469881317,
        "avg_loss_pct": -0.0033443113922230947,
        "profit_factor": 0.33034569058856667,
        "largest_win_pct": 0.013908487748085063,
        "largest_loss_pct": -0.023321517375479828,
        "avg_holding_minutes": 26.785714285714285
      },
      "short": {
        "total_trades": 227,
        "winning_trades": 127,
        "losing_trades": 100,
        "win_rate": 0.5594713656387665,
        "avg_win_pct": 0.0027191180300899604,
        "avg_loss_pct": -0.002927420995464386,
        "profit_factor": 0.3455546784688045,
        "largest_win_pct": 0.01791127310942553,
        "largest_loss_pct": -0.023157933825735166,
        "avg_holding_minutes": 19.550660792951543
      },
      "total_trades": 493,
      "long_count": 266,
      "short_count": 227
    },
    "holding_time_stats": {
      "mean": 23.454361054766736,
      "median": 10.0,
      "min": 1.0,
      "max": 1060.0,
      "std": 80.87927325363381
    },
    "exit_reasons": {
      "HORIZON_EXIT": 404,
      "STOP_LOSS": 31,
      "TAKE_PROFIT": 40,
      "MAX_HOLD": 18
    },
    "hourly_performance": {
      "14": {
        "avg_pnl": -1.121796969976122,
        "win_rate": 0.3333333333333333,
        "total_trades": 51,
        "total_pnl": -57.21164546878223
      },
      "18": {
        "avg_pnl": -0.5345380232043841,
        "win_rate": 0.38461538461538464,
        "total_trades": 26,
        "total_pnl": -13.897988603313987
      },
      "2": {
        "avg_pnl": -1.9952237018849937,
        "win_rate": 0.2222222222222222,
        "total_trades": 18,
        "total_pnl": -35.914026633929886
      },
      "6": {
        "avg_pnl": -3.168957896452213,
        "win_rate": 0.125,
        "total_trades": 8,
        "total_pnl": -25.351663171617705
      },
      "12": {
        "avg_pnl": -0.701658260358738,
        "win_rate": 0.6,
        "total_trades": 5,
        "total_pnl": -3.5082913017936903
      },
      "17": {
        "avg_pnl": -2.2730068759483935,
        "win_rate": 0.25,
        "total_trades": 40,
        "total_pnl": -90.92027503793574
      },
      "13": {
        "avg_pnl": -1.1841271458888485,
        "win_rate": 0.3333333333333333,
        "total_trades": 36,
        "total_pnl": -42.62857725199854
      },
      "0": {
        "avg_pnl": -2.0747460118160426,
        "win_rate": 0.25,
        "total_trades": 28,
        "total_pnl": -58.09288833084919
      },
      "16": {
        "avg_pnl": -1.3933212351468371,
        "win_rate": 0.375,
        "total_trades": 48,
        "total_pnl": -66.87941928704818
      },
      "4": {
        "avg_pnl": -2.3036080463609268,
        "win_rate": 0.2857142857142857,
        "total_trades": 7,
        "total_pnl": -16.125256324526486
      },
      "9": {
        "avg_pnl": -0.141345297765952,
        "win_rate": 0.5,
        "total_trades": 10,
        "total_pnl": -1.41345297765952
      },
      "15": {
        "avg_pnl": -1.1294350495945116,
        "win_rate": 0.4523809523809524,
        "total_trades": 42,
        "total_pnl": -47.43627208296949
      },
      "8": {
        "avg_pnl": -2.526552737018288,
        "win_rate": 0.2,
        "total_trades": 10,
        "total_pnl": -25.265527370182877
      },
      "19": {
        "avg_pnl": -1.3160647527507743,
        "win_rate": 0.21875,
        "total_trades": 32,
        "total_pnl": -42.11407208802478
      },
      "1": {
        "avg_pnl": 0.2676707412837585,
        "win_rate": 0.5,
        "total_trades": 14,
        "total_pnl": 3.7473903779726188
      },
      "3": {
        "avg_pnl": -1.8258740053976705,
        "win_rate": 0.4,
        "total_trades": 10,
        "total_pnl": -18.258740053976705
      },
      "7": {
        "avg_pnl": -4.8636721932772735,
        "win_rate": 0.3333333333333333,
        "total_trades": 6,
        "total_pnl": -29.18203315966364
      },
      "20": {
        "avg_pnl": -0.7182719594814321,
        "win_rate": 0.3333333333333333,
        "total_trades": 24,
        "total_pnl": -17.23852702755437
      },
      "21": {
        "avg_pnl": -0.3447514946832183,
        "win_rate": 0.45,
        "total_trades": 20,
        "total_pnl": -6.895029893664367
      },
      "22": {
        "avg_pnl": -1.5264209071187662,
        "win_rate": 0.34782608695652173,
        "total_trades": 23,
        "total_pnl": -35.10768086373162
      },
      "11": {
        "avg_pnl": -0.9186910291028076,
        "win_rate": 0.46153846153846156,
        "total_trades": 13,
        "total_pnl": -11.9429833783365
      },
      "5": {
        "avg_pnl": -3.0245947886331392,
        "win_rate": 0.3333333333333333,
        "total_trades": 6,
        "total_pnl": -18.147568731798835
      },
      "10": {
        "avg_pnl": -1.7540283131861587,
        "win_rate": 0.5,
        "total_trades": 4,
        "total_pnl": -7.016113252744635
      },
      "23": {
        "avg_pnl": -2.2881807682868405,
        "win_rate": 0.3333333333333333,
        "total_trades": 12,
        "total_pnl": -27.458169219442087
      }
    },
    "confidence_quartiles": {
      "Q1": {
        "avg_pnl": -1.351323071571004,
        "win_rate": 0.3467741935483871,
        "avg_confidence": -0.1507646741994621,
        "trades": 124
      },
      "Q2": {
        "avg_pnl": -0.9484897592343893,
        "win_rate": 0.34959349593495936,
        "avg_confidence": -0.053132278112981796,
        "trades": 123
      },
      "Q3": {
        "avg_pnl": -1.4372371443838383,
        "win_rate": 0.35772357723577236,
        "avg_confidence": 0.05815321482681043,
        "trades": 123
      },
      "Q4": {
        "avg_pnl": -1.8963442366969598,
        "win_rate": 0.3170731707317073,
        "avg_confidence": 0.14288539813872753,
        "trades": 123
      }
    }
  },
  "threshold_sensitivity": [
    {
      "threshold": 0.3,
      "total_signals": 2533,
      "long_signals": 1340,
      "short_signals": 1193,
      "signal_ratio": 0.1474217204050751,
      "accuracy": 0.540391106972413
    },
    {
      "threshold": 0.35,
      "total_signals": 4078,
      "long_signals": 2357,
      "short_signals": 1721,
      "signal_ratio": 0.23734140379466884,
      "accuracy": 0.5118146897916425
    },
    {
      "threshold": 0.39999999999999997,
      "total_signals": 5012,
      "long_signals": 2547,
      "short_signals": 2465,
      "signal_ratio": 0.2917006169246886,
      "accuracy": 0.5257827959492493
    },
    {
      "threshold": 0.44999999999999996,
      "total_signals": 4294,
      "long_signals": 1734,
      "short_signals": 2560,
      "signal_ratio": 0.24991269933651497,
      "accuracy": 0.5757187754626936
    },
    {
      "threshold": 0.49999999999999994,
      "total_signals": 3009,
      "long_signals": 974,
      "short_signals": 2035,
      "signal_ratio": 0.17512513095099522,
      "accuracy": 0.6129088581073217
    },
    {
      "threshold": 0.5499999999999999,
      "total_signals": 2109,
      "long_signals": 540,
      "short_signals": 1569,
      "signal_ratio": 0.12274473285996973,
      "accuracy": 0.6356070306134327
    },
    {
      "threshold": 0.5999999999999999,
      "total_signals": 968,
      "long_signals": 313,
      "short_signals": 655,
      "signal_ratio": 0.056338028169014086,
      "accuracy": 0.6417180770573856
    },
    {
      "threshold": 0.6499999999999999,
      "total_signals": 129,
      "long_signals": 90,
      "short_signals": 39,
      "signal_ratio": 0.007507857059713654,
      "accuracy": 0.6313001978815039
    },
    {
      "threshold": 0.7,
      "total_signals": 3,
      "long_signals": 3,
      "short_signals": 0,
      "signal_ratio": 0.00017460132697008496,
      "accuracy": 0.6288557793039227
    },
    {
      "threshold": 0.7499999999999999,
      "total_signals": 1,
      "long_signals": 1,
      "short_signals": 0,
      "signal_ratio": 5.820044232336166e-05,
      "accuracy": 0.6288557793039227
    },
    {
      "threshold": 0.7999999999999998,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.6287975788615994
    }
  ],
  "best_params": {
    "n_estimators": 92,
    "max_depth": 12,
    "min_samples_split": 38,
    "min_samples_leaf": 22,
    "thr_long": 0.5010383263842964,
    "thr_short": 0.5327081980920101,
    "min_confidence": 0.028398833356498072,
    "stop_mult": 1.19750644329626,
    "take_mult": 0.8751314716393217,
    "trailing_mult": 0.6828298230140971,
    "breakeven_mult": 0.5223015503027029
  },
  "config": {
    "session_config": {
      "prebuffer_min": 45,
      "session_len_min": 45,
      "volatility_window": 10,
      "zscore_window_days": 3,
      "volatility_threshold": 1.8,
      "cooldown_min": 30
    },
    "sim_config": {
      "commission": 0.001,
      "spread_pct": 0.0002,
      "risk_per_trade": 0.01,
      "max_position_pct": 0.1,
      "default_stop_pct": 0.005,
      "default_take_pct": 0.015,
      "max_hold_minutes": 30,
      "min_hold_bars": 3
    }
  }
}