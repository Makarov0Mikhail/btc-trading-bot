{
  "horizon": 15,
  "timestamp": "20251217_234205",
  "metrics": {
    "long_accuracy": 0.7944519621109608,
    "short_accuracy": 0.8560893098782139,
    "long_precision": 0.21914357682619648,
    "short_precision": 0.27419354838709675,
    "long_recall": 0.16216216216216217,
    "short_recall": 0.008099094807050978,
    "long_f1": 0.18639528655597215,
    "short_f1": 0.015733456732993985
  },
  "financial": {
    "pnl": -5.794769441179081,
    "sharpe": 7.270279540368781,
    "max_drawdown": 22.815954124879898
  },
  "feature_analysis": {
    "long_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.2870319835316739,
          "mutual_info": 0.006847707063031727,
          "abs_correlation": 0.023735262516078187
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.14615303015695766,
          "mutual_info": 0.0059791501827102245,
          "abs_correlation": 0.019551936283263665
        },
        {
          "feature": "log_return",
          "importance": 0.08170504035750623,
          "mutual_info": 0.0067979205955635,
          "abs_correlation": 0.01773014041611684
        },
        {
          "feature": "macd_hist",
          "importance": 0.08082496434910938,
          "mutual_info": 0.0,
          "abs_correlation": 0.016323330226594747
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.07648599510695268,
          "mutual_info": 0.0004504745749982497,
          "abs_correlation": 0.0023432960029551187
        },
        {
          "feature": "rsi_14",
          "importance": 0.057628775135323655,
          "mutual_info": 0.0003871041704792688,
          "abs_correlation": 0.03685416733842849
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.04952073799152869,
          "mutual_info": 0.006793328912484631,
          "abs_correlation": 0.0175271903051269
        },
        {
          "feature": "volume_change",
          "importance": 0.04827954230552308,
          "mutual_info": 0.011312795397167452,
          "abs_correlation": 0.13456756458384408
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.04776620661416837,
          "mutual_info": 0.023240954394492697,
          "abs_correlation": 0.18583830594453596
        },
        {
          "feature": "log_return_lag_2",
          "importance": 0.047755208604300804,
          "mutual_info": 0.002605549715189559,
          "abs_correlation": 0.03604354412282884
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.2870319835316739,
        "min_importance": 0.008585972911623937,
        "mean_importance": 0.07692307692307694
      }
    },
    "short_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.23048122096663104,
          "mutual_info": 0.0027650972456987333,
          "abs_correlation": 0.013825149762860318
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.11344076131479432,
          "mutual_info": 0.002312994084430642,
          "abs_correlation": 0.014178606720437682
        },
        {
          "feature": "macd_hist",
          "importance": 0.0949673541891973,
          "mutual_info": 0.00026159278668580477,
          "abs_correlation": 0.010709684562613573
        },
        {
          "feature": "rsi_14",
          "importance": 0.07734094249039913,
          "mutual_info": 0.0023156236503334426,
          "abs_correlation": 0.03627178075543437
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.07214847776269631,
          "mutual_info": 0.0003847306770488057,
          "abs_correlation": 0.02512950235997667
        },
        {
          "feature": "hour_sin",
          "importance": 0.07054181893957105,
          "mutual_info": 0.0,
          "abs_correlation": 0.01997639702800051
        },
        {
          "feature": "log_return",
          "importance": 0.06536523917070845,
          "mutual_info": 0.00016937837577435388,
          "abs_correlation": 0.010849411935739317
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.061456034404331554,
          "mutual_info": 0.008594230551675519,
          "abs_correlation": 0.0851440055465387
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.051101027861923096,
          "mutual_info": 0.010899081896031504,
          "abs_correlation": 0.11019698436232978
        },
        {
          "feature": "volume_change",
          "importance": 0.05094736012780926,
          "mutual_info": 0.002623836629083831,
          "abs_correlation": 0.01894983190218393
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.23048122096663104,
        "min_importance": 0.014338427999795612,
        "mean_importance": 0.07692307692307691
      }
    }
  },
  "trades_detailed": {
    "summary": {
      "total_trades": 407,
      "winning_trades": 220,
      "losing_trades": 187,
      "win_rate": 0.5405405405405406,
      "avg_win_pct": 0.004305054461907399,
      "avg_loss_pct": -0.004980242223762754,
      "profit_factor": 0.505630090523056,
      "largest_win_pct": 0.0257987694321129,
      "largest_loss_pct": -0.03945664510363189,
      "avg_holding_minutes": 51.26044226044226
    },
    "by_direction": {
      "long": {
        "total_trades": 370,
        "winning_trades": 200,
        "losing_trades": 170,
        "win_rate": 0.5405405405405406,
        "avg_win_pct": 0.0042605496975830146,
        "avg_loss_pct": -0.005087958706615827,
        "profit_factor": 0.49054824037117883,
        "largest_win_pct": 0.0257987694321129,
        "largest_loss_pct": -0.03945664510363189,
        "avg_holding_minutes": 52.502702702702706
      },
      "short": {
        "total_trades": 37,
        "winning_trades": 20,
        "losing_trades": 17,
        "win_rate": 0.5405405405405406,
        "avg_win_pct": 0.004750102105151232,
        "avg_loss_pct": -0.00390307739523203,
        "profit_factor": 0.6870895592832399,
        "largest_win_pct": 0.020979064698305683,
        "largest_loss_pct": -0.011953516901263672,
        "avg_holding_minutes": 38.83783783783784
      },
      "total_trades": 407,
      "long_count": 370,
      "short_count": 37
    },
    "holding_time_stats": {
      "mean": 51.26044226044226,
      "median": 15.0,
      "min": 1.0,
      "max": 1225.0,
      "std": 98.79226950429533
    },
    "exit_reasons": {
      "HORIZON_EXIT": 267,
      "MAX_HOLD": 105,
      "STOP_LOSS": 29,
      "TAKE_PROFIT": 6
    },
    "hourly_performance": {
      "18": {
        "avg_pnl": -0.19411403593780266,
        "win_rate": 0.5454545454545454,
        "total_trades": 22,
        "total_pnl": -4.270508790631658
      },
      "0": {
        "avg_pnl": -0.9291162003009767,
        "win_rate": 0.46153846153846156,
        "total_trades": 13,
        "total_pnl": -12.078510603912697
      },
      "6": {
        "avg_pnl": -4.0609658592582285,
        "win_rate": 0.14285714285714285,
        "total_trades": 7,
        "total_pnl": -28.4267610148076
      },
      "17": {
        "avg_pnl": -1.4242344930226671,
        "win_rate": 0.3055555555555556,
        "total_trades": 36,
        "total_pnl": -51.272441748816014
      },
      "23": {
        "avg_pnl": -0.9196370889637804,
        "win_rate": 0.25,
        "total_trades": 8,
        "total_pnl": -7.357096711710243
      },
      "13": {
        "avg_pnl": -0.6809545196934134,
        "win_rate": 0.3333333333333333,
        "total_trades": 24,
        "total_pnl": -16.34290847264192
      },
      "8": {
        "avg_pnl": -0.8152285963917131,
        "win_rate": 0.4444444444444444,
        "total_trades": 9,
        "total_pnl": -7.337057367525418
      },
      "16": {
        "avg_pnl": -0.8249849438693109,
        "win_rate": 0.45454545454545453,
        "total_trades": 44,
        "total_pnl": -36.29933753024968
      },
      "2": {
        "avg_pnl": -3.0444526901173043,
        "win_rate": 0.1875,
        "total_trades": 16,
        "total_pnl": -48.71124304187687
      },
      "4": {
        "avg_pnl": -3.963256040747131,
        "win_rate": 0.2222222222222222,
        "total_trades": 9,
        "total_pnl": -35.66930436672418
      },
      "9": {
        "avg_pnl": -2.6625206416090093,
        "win_rate": 0.2727272727272727,
        "total_trades": 11,
        "total_pnl": -29.2877270576991
      },
      "14": {
        "avg_pnl": -0.2774841966255163,
        "win_rate": 0.5135135135135135,
        "total_trades": 37,
        "total_pnl": -10.266915275144104
      },
      "15": {
        "avg_pnl": -3.9055629882596956,
        "win_rate": 0.3157894736842105,
        "total_trades": 38,
        "total_pnl": -148.41139355386844
      },
      "19": {
        "avg_pnl": -1.7385648734903574,
        "win_rate": 0.3103448275862069,
        "total_trades": 29,
        "total_pnl": -50.41838133122037
      },
      "20": {
        "avg_pnl": 0.06406935682649088,
        "win_rate": 0.2777777777777778,
        "total_trades": 18,
        "total_pnl": 1.1532484228768358
      },
      "1": {
        "avg_pnl": -1.7539191614976368,
        "win_rate": 0.2727272727272727,
        "total_trades": 11,
        "total_pnl": -19.293110776474006
      },
      "3": {
        "avg_pnl": -2.6858248146855916,
        "win_rate": 0.4166666666666667,
        "total_trades": 12,
        "total_pnl": -32.2298977762271
      },
      "7": {
        "avg_pnl": -3.2913089253929733,
        "win_rate": 0.42857142857142855,
        "total_trades": 7,
        "total_pnl": -23.039162477750814
      },
      "21": {
        "avg_pnl": -1.155534115965139,
        "win_rate": 0.42857142857142855,
        "total_trades": 14,
        "total_pnl": -16.177477623511948
      },
      "11": {
        "avg_pnl": -1.2902073620245578,
        "win_rate": 0.38461538461538464,
        "total_trades": 13,
        "total_pnl": -16.77269570631925
      },
      "10": {
        "avg_pnl": 3.8268884922549398,
        "win_rate": 0.8333333333333334,
        "total_trades": 6,
        "total_pnl": 22.96133095352964
      },
      "22": {
        "avg_pnl": -0.36675645159798653,
        "win_rate": 0.5294117647058824,
        "total_trades": 17,
        "total_pnl": -6.234859677165771
      },
      "12": {
        "avg_pnl": 0.7996749775927907,
        "win_rate": 0.5,
        "total_trades": 4,
        "total_pnl": 3.198699910371163
      },
      "5": {
        "avg_pnl": -3.446716250204154,
        "win_rate": 0.0,
        "total_trades": 2,
        "total_pnl": -6.893432500408308
      }
    },
    "confidence_quartiles": {
      "Q1": {
        "avg_pnl": -1.806972799732444,
        "win_rate": 0.3627450980392157,
        "avg_confidence": -0.03441571552853696,
        "trades": 102
      },
      "Q2": {
        "avg_pnl": -1.4971779317238403,
        "win_rate": 0.38235294117647056,
        "avg_confidence": 0.05934194943585544,
        "trades": 102
      },
      "Q3": {
        "avg_pnl": -1.292421638939541,
        "win_rate": 0.39603960396039606,
        "avg_confidence": 0.09088990478183442,
        "trades": 101
      },
      "Q4": {
        "avg_pnl": -1.0972449409458156,
        "win_rate": 0.38235294117647056,
        "avg_confidence": 0.16016628620931755,
        "trades": 102
      }
    }
  },
  "threshold_sensitivity": [
    {
      "threshold": 0.3,
      "total_signals": 3355,
      "long_signals": 1079,
      "short_signals": 2276,
      "signal_ratio": 0.2269959404600812,
      "accuracy": 0.5621109607577808
    },
    {
      "threshold": 0.35,
      "total_signals": 3701,
      "long_signals": 975,
      "short_signals": 2726,
      "signal_ratio": 0.2504059539918809,
      "accuracy": 0.5721244925575102
    },
    {
      "threshold": 0.39999999999999997,
      "total_signals": 3415,
      "long_signals": 1104,
      "short_signals": 2311,
      "signal_ratio": 0.2310554803788904,
      "accuracy": 0.6113667117726658
    },
    {
      "threshold": 0.44999999999999996,
      "total_signals": 2690,
      "long_signals": 1078,
      "short_signals": 1612,
      "signal_ratio": 0.18200270635994586,
      "accuracy": 0.6478349120433018
    },
    {
      "threshold": 0.49999999999999994,
      "total_signals": 1861,
      "long_signals": 716,
      "short_signals": 1145,
      "signal_ratio": 0.12591339648173208,
      "accuracy": 0.6902571041948579
    },
    {
      "threshold": 0.5499999999999999,
      "total_signals": 1334,
      "long_signals": 619,
      "short_signals": 715,
      "signal_ratio": 0.09025710419485791,
      "accuracy": 0.7085926928281462
    },
    {
      "threshold": 0.5999999999999999,
      "total_signals": 682,
      "long_signals": 437,
      "short_signals": 245,
      "signal_ratio": 0.046143437077131255,
      "accuracy": 0.7156292286874154
    },
    {
      "threshold": 0.6499999999999999,
      "total_signals": 170,
      "long_signals": 147,
      "short_signals": 23,
      "signal_ratio": 0.011502029769959404,
      "accuracy": 0.7160351826792963
    },
    {
      "threshold": 0.7,
      "total_signals": 35,
      "long_signals": 35,
      "short_signals": 0,
      "signal_ratio": 0.002368064952638701,
      "accuracy": 0.7128552097428958
    },
    {
      "threshold": 0.7499999999999999,
      "total_signals": 4,
      "long_signals": 4,
      "short_signals": 0,
      "signal_ratio": 0.00027063599458728013,
      "accuracy": 0.7127875507442489
    },
    {
      "threshold": 0.7999999999999998,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.7127875507442489
    }
  ],
  "best_params": {
    "n_estimators": 101,
    "max_depth": 13,
    "min_samples_split": 16,
    "min_samples_leaf": 17,
    "thr_long": 0.45092796790605555,
    "thr_short": 0.5621631224448886,
    "min_confidence": 0.03424126445740042,
    "stop_mult": 1.761885224902432,
    "take_mult": 1.6796544314808575,
    "trailing_mult": 0.8587946337943644,
    "breakeven_mult": 1.0452574338593132
  },
  "config": {
    "session_config": {
      "prebuffer_min": 45,
      "session_len_min": 45,
      "volatility_window": 10,
      "zscore_window_days": 3,
      "volatility_threshold": 1.8,
      "cooldown_min": 30
    },
    "sim_config": {
      "commission": 0.001,
      "spread_pct": 0.0002,
      "risk_per_trade": 0.01,
      "max_position_pct": 0.1,
      "default_stop_pct": 0.005,
      "default_take_pct": 0.015,
      "max_hold_minutes": 30,
      "min_hold_bars": 3
    }
  }
}