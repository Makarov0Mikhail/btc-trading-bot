{
  "model": "ExtraTreesClassifier",
  "best_params": {
    "n_estimators": 146,
    "max_depth": 8,
    "min_samples_split": 42,
    "min_samples_leaf": 19,
    "max_features": "log2",
    "bootstrap": false,
    "sl_atr_mult": 1.679191560306192,
    "tp_atr_mult": 3.861618482401709,
    "max_hold_days": 14,
    "stop_loss_pct": 0.014042090519690995,
    "take_profit_pct": 0.0365021500781508,
    "min_trades_thr": 28,
    "proba_step": 0.010501547562743645,
    "ret_step": 0.0010824372519335611,
    "ret_min": 0.010192524431174126,
    "ret_max": 0.014909453430143963,
    "atr_col": "atr_7",
    "bag_n_estimators": 53,
    "bag_max_samples": 0.9933632450586556,
    "bag_max_features": 0.990874051821807,
    "logreg_C": 6.6864415435733235,
    "weight_pnl": 0.4686634351160122,
    "pnl_scale": 52.54782631154136
  },
  "rf_params": {
    "n_estimators": 146,
    "max_depth": 8,
    "min_samples_split": 42,
    "min_samples_leaf": 19,
    "max_features": "log2",
    "bootstrap": false,
    "random_state": 42,
    "n_jobs": -1,
    "class_weight": "balanced"
  },
  "trade_params": {
    "stop_loss": 0.03,
    "take_profit": 0.05,
    "max_hold_days": 14,
    "atr_col": "atr_14",
    "sl_atr_mult": 1.679191560306192,
    "tp_atr_mult": 3.861618482401709
  },
  "features_used": [
    "returns",
    "log_returns",
    "sma_ratio",
    "sma_7",
    "sma_21",
    "logret_std_1",
    "logret_std_7",
    "logret_std_14",
    "logret_std_21",
    "logret_std_28",
    "logret_mean_7",
    "logret_cum_7",
    "logret_skew_14",
    "logret_kurt_14",
    "atr_14",
    "atr_pct",
    "atr_pct_7",
    "atr_pct_21",
    "range_pct",
    "range_vol_14",
    "body_pct",
    "upper_wick_pct",
    "lower_wick_pct",
    "volume_ratio",
    "log_volume_diff",
    "obv_delta",
    "macd",
    "macd_signal",
    "macd_hist",
    "rsi_14",
    "hour_sin",
    "hour_cos"
  ],
  "target_horizon": 6,
  "metrics": {
    "train": {
      "train_accuracy": 0.6967989878977395,
      "train_precision": 0.2951296150824823,
      "train_recall": 0.5018701576275715,
      "train_f1": 0.37168579343094577,
      "train_roc_auc": 0.6806359713085802
    },
    "validation": {
      "val_best_accuracy": 0.8716054313099042,
      "val_best_precision": 0.31645569620253167,
      "val_best_recall": 0.04071661237785016,
      "val_best_f1": 0.07215007215007214,
      "val_best_roc_auc": 0.6326868590423127
    },
    "test": {
      "test_accuracy": 0.8079073482428115,
      "test_precision": 0.20504731861198738,
      "test_recall": 0.22108843537414966,
      "test_f1": 0.2127659574468085,
      "test_roc_auc": 0.6259011296826423
    }
  },
  "trading_results": {
    "pnl_test": -15.81421997706418,
    "final_capital": 8418.578002293581,
    "num_trades": 72,
    "max_drawdown": 19.37010821177249
  },
  "horizon_analysis": [
    {
      "horizon": 6,
      "f1": 0.28530259365994237,
      "accuracy": 0.7028753993610224,
      "pnl": -37.859748410866644,
      "trades": 176
    },
    {
      "horizon": 12,
      "f1": 0.2942227516378797,
      "accuracy": 0.7633785942492013,
      "pnl": -24.861595778526947,
      "trades": 88
    },
    {
      "horizon": 24,
      "f1": 0.23446184941889844,
      "accuracy": 0.6974840255591054,
      "pnl": -28.567332023673508,
      "trades": 110
    }
  ],
  "metadata": {
    "created_date": "2025-12-11T13:09:40.523885",
    "phase": 2,
    "data_version": "2025-12-11T01:51:31.657818"
  }
}