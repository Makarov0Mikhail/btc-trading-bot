{
  "horizon": 10,
  "timestamp": "20251217_235152",
  "metrics": {
    "long_accuracy": 0.7362937958328484,
    "short_accuracy": 0.8116633686416017,
    "long_precision": 0.22360764754779716,
    "short_precision": 0.2814814814814815,
    "long_recall": 0.16807247735082786,
    "short_recall": 0.011960969468051622,
    "long_f1": 0.19190297841983237,
    "short_f1": 0.022946859903381644
  },
  "financial": {
    "pnl": -17.15964905469264,
    "sharpe": 7.368052560504082,
    "max_drawdown": 24.72674646349904
  },
  "feature_analysis": {
    "long_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.2684065962113935,
          "mutual_info": 0.006925699513796513,
          "abs_correlation": 0.03379073157177336
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.12529985820882264,
          "mutual_info": 0.005840017203462722,
          "abs_correlation": 0.02539152846586131
        },
        {
          "feature": "sma_7",
          "importance": 0.10241420358169963,
          "mutual_info": 0.005228817492173077,
          "abs_correlation": 0.020811790498981332
        },
        {
          "feature": "log_return",
          "importance": 0.07499726899721307,
          "mutual_info": 0.0014493277519234127,
          "abs_correlation": 0.01442352040791242
        },
        {
          "feature": "macd_hist",
          "importance": 0.06309438461048038,
          "mutual_info": 0.0,
          "abs_correlation": 0.011337432152909534
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.06069281780382289,
          "mutual_info": 0.0026401743697470614,
          "abs_correlation": 0.03261175198940797
        },
        {
          "feature": "rsi_14",
          "importance": 0.05946182805567729,
          "mutual_info": 0.00524520138154938,
          "abs_correlation": 0.0206566766823978
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.048269720247350635,
          "mutual_info": 0.01043837134167358,
          "abs_correlation": 0.11669112319913297
        },
        {
          "feature": "volume_change",
          "importance": 0.04440131222063025,
          "mutual_info": 0.025092250059994825,
          "abs_correlation": 0.0802374152581831
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.04320598586765479,
          "mutual_info": 0.0217759439384424,
          "abs_correlation": 0.16835844815208345
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.2684065962113935,
        "min_importance": 0.006046582674459984,
        "mean_importance": 0.07142857142857144
      }
    },
    "short_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.17567165706145155,
          "mutual_info": 0.002479105137388915,
          "abs_correlation": 0.01733702383422339
        },
        {
          "feature": "sma_7",
          "importance": 0.15795269256649327,
          "mutual_info": 0.004579538284201989,
          "abs_correlation": 0.013213051329808908
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.11114204228166287,
          "mutual_info": 0.001306826217797541,
          "abs_correlation": 0.008231064365122779
        },
        {
          "feature": "rsi_14",
          "importance": 0.07106000376854125,
          "mutual_info": 0.0029531416875210326,
          "abs_correlation": 0.03538102604065226
        },
        {
          "feature": "macd_hist",
          "importance": 0.0705330920665166,
          "mutual_info": 0.0006063301871253035,
          "abs_correlation": 0.03192771408599976
        },
        {
          "feature": "log_return",
          "importance": 0.06247785011743054,
          "mutual_info": 0.0,
          "abs_correlation": 0.01794308490448036
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.058668537325052623,
          "mutual_info": 0.0013265891941232066,
          "abs_correlation": 0.00836820525468705
        },
        {
          "feature": "hour_sin",
          "importance": 0.055591908571587745,
          "mutual_info": 0.009126604358844492,
          "abs_correlation": 0.0865580250330122
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.04723982284996592,
          "mutual_info": 0.025058484135292103,
          "abs_correlation": 0.09735087894039794
        },
        {
          "feature": "volume_change",
          "importance": 0.04683161410147816,
          "mutual_info": 0.011563461596633351,
          "abs_correlation": 0.11134109518928197
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.17567165706145155,
        "min_importance": 0.010128184518127059,
        "mean_importance": 0.07142857142857144
      }
    }
  },
  "trades_detailed": {
    "summary": {
      "total_trades": 505,
      "winning_trades": 257,
      "losing_trades": 248,
      "win_rate": 0.5089108910891089,
      "avg_win_pct": 0.0027288217122855463,
      "avg_loss_pct": -0.0031154921270809513,
      "profit_factor": 0.27518558830430756,
      "largest_win_pct": 0.015685781723348002,
      "largest_loss_pct": -0.028394343853498483,
      "avg_holding_minutes": 27.38095238095238
    },
    "by_direction": {
      "long": {
        "total_trades": 471,
        "winning_trades": 236,
        "losing_trades": 235,
        "win_rate": 0.5010615711252654,
        "avg_win_pct": 0.0026896060249618535,
        "avg_loss_pct": -0.0031476564921154577,
        "profit_factor": 0.2559495420378919,
        "largest_win_pct": 0.015685781723348002,
        "largest_loss_pct": -0.028394343853498483,
        "avg_holding_minutes": 27.336170212765957
      },
      "short": {
        "total_trades": 34,
        "winning_trades": 21,
        "losing_trades": 13,
        "win_rate": 0.6176470588235294,
        "avg_win_pct": 0.0031695313412565687,
        "avg_loss_pct": -0.0025340593745341033,
        "profit_factor": 0.6637389806041498,
        "largest_win_pct": 0.006222977699465115,
        "largest_loss_pct": -0.011954404503105587,
        "avg_holding_minutes": 28.0
      },
      "total_trades": 505,
      "long_count": 471,
      "short_count": 34
    },
    "holding_time_stats": {
      "mean": 27.326732673267326,
      "median": 10.0,
      "min": 0.0,
      "max": 1525.0,
      "std": 100.47677520039699
    },
    "exit_reasons": {
      "TAKE_PROFIT": 44,
      "HORIZON_EXIT": 423,
      "MAX_HOLD": 22,
      "STOP_LOSS": 15,
      "FORCE_CLOSE": 1
    },
    "hourly_performance": {
      "18": {
        "avg_pnl": -0.48952089125184706,
        "win_rate": 0.4,
        "total_trades": 20,
        "total_pnl": -9.790417825036942
      },
      "0": {
        "avg_pnl": -2.4704957209646725,
        "win_rate": 0.3125,
        "total_trades": 16,
        "total_pnl": -39.52793153543476
      },
      "2": {
        "avg_pnl": -2.040078688122126,
        "win_rate": 0.2,
        "total_trades": 25,
        "total_pnl": -51.00196720305315
      },
      "6": {
        "avg_pnl": -2.21369950809435,
        "win_rate": 0.25,
        "total_trades": 12,
        "total_pnl": -26.564394097132197
      },
      "4": {
        "avg_pnl": -1.0059417538933308,
        "win_rate": 0.2777777777777778,
        "total_trades": 18,
        "total_pnl": -18.106951570079953
      },
      "12": {
        "avg_pnl": -1.308580515076757,
        "win_rate": 0.23076923076923078,
        "total_trades": 13,
        "total_pnl": -17.011546695997843
      },
      "17": {
        "avg_pnl": -1.0086946078510497,
        "win_rate": 0.4411764705882353,
        "total_trades": 34,
        "total_pnl": -34.295616666935686
      },
      "23": {
        "avg_pnl": -2.132433474434852,
        "win_rate": 0.16666666666666666,
        "total_trades": 12,
        "total_pnl": -25.589201693218225
      },
      "14": {
        "avg_pnl": -1.0594898058757412,
        "win_rate": 0.28888888888888886,
        "total_trades": 45,
        "total_pnl": -47.67704126440835
      },
      "13": {
        "avg_pnl": -2.0338610967438857,
        "win_rate": 0.23076923076923078,
        "total_trades": 26,
        "total_pnl": -52.880388515341025
      },
      "16": {
        "avg_pnl": -2.118730228935397,
        "win_rate": 0.2653061224489796,
        "total_trades": 49,
        "total_pnl": -103.81778121783447
      },
      "5": {
        "avg_pnl": -1.8259183085715642,
        "win_rate": 0.25,
        "total_trades": 8,
        "total_pnl": -14.607346468572514
      },
      "9": {
        "avg_pnl": -0.7176552268323315,
        "win_rate": 0.23076923076923078,
        "total_trades": 13,
        "total_pnl": -9.32951794882031
      },
      "15": {
        "avg_pnl": -2.5400040672343,
        "win_rate": 0.2857142857142857,
        "total_trades": 35,
        "total_pnl": -88.90014235320051
      },
      "8": {
        "avg_pnl": -1.3663729506675628,
        "win_rate": 0.35714285714285715,
        "total_trades": 14,
        "total_pnl": -19.12922130934588
      },
      "19": {
        "avg_pnl": -1.8139738869894613,
        "win_rate": 0.2631578947368421,
        "total_trades": 38,
        "total_pnl": -68.93100770559953
      },
      "20": {
        "avg_pnl": -1.477958188967701,
        "win_rate": 0.2608695652173913,
        "total_trades": 23,
        "total_pnl": -33.99303834625712
      },
      "1": {
        "avg_pnl": -0.8945982016663444,
        "win_rate": 0.36363636363636365,
        "total_trades": 22,
        "total_pnl": -19.681160436659578
      },
      "3": {
        "avg_pnl": -0.17697140252237728,
        "win_rate": 0.4,
        "total_trades": 15,
        "total_pnl": -2.6545710378356593
      },
      "7": {
        "avg_pnl": -4.9179932608787436,
        "win_rate": 0.0,
        "total_trades": 10,
        "total_pnl": -49.17993260878743
      },
      "21": {
        "avg_pnl": 0.19390170817453833,
        "win_rate": 0.3888888888888889,
        "total_trades": 18,
        "total_pnl": 3.4902307471416902
      },
      "22": {
        "avg_pnl": -2.115490793989452,
        "win_rate": 0.35294117647058826,
        "total_trades": 17,
        "total_pnl": -35.96334349782068
      },
      "11": {
        "avg_pnl": -1.380788783776166,
        "win_rate": 0.2857142857142857,
        "total_trades": 14,
        "total_pnl": -19.331042972866324
      },
      "10": {
        "avg_pnl": -1.4594176554552103,
        "win_rate": 0.375,
        "total_trades": 8,
        "total_pnl": -11.675341243641682
      }
    },
    "confidence_quartiles": {
      "Q1": {
        "avg_pnl": -1.202650997558881,
        "win_rate": 0.36220472440944884,
        "avg_confidence": -0.02807520721936131,
        "trades": 127
      },
      "Q2": {
        "avg_pnl": -2.2558007121500947,
        "win_rate": 0.2619047619047619,
        "avg_confidence": 0.017550571328885847,
        "trades": 126
      },
      "Q3": {
        "avg_pnl": -0.9539850805449228,
        "win_rate": 0.2777777777777778,
        "avg_confidence": 0.03874404633689718,
        "trades": 126
      },
      "Q4": {
        "avg_pnl": -1.8966586261681586,
        "win_rate": 0.2698412698412698,
        "avg_confidence": 0.07956420460213164,
        "trades": 126
      }
    }
  },
  "threshold_sensitivity": [
    {
      "threshold": 0.3,
      "total_signals": 834,
      "long_signals": 0,
      "short_signals": 834,
      "signal_ratio": 0.04853916889768362,
      "accuracy": 0.5962053311605168
    },
    {
      "threshold": 0.35,
      "total_signals": 1574,
      "long_signals": 437,
      "short_signals": 1137,
      "signal_ratio": 0.09160749621697124,
      "accuracy": 0.5695495285764172
    },
    {
      "threshold": 0.39999999999999997,
      "total_signals": 2938,
      "long_signals": 1231,
      "short_signals": 1707,
      "signal_ratio": 0.17099289954603655,
      "accuracy": 0.5402165056454429
    },
    {
      "threshold": 0.44999999999999996,
      "total_signals": 3257,
      "long_signals": 1033,
      "short_signals": 2224,
      "signal_ratio": 0.18955884064718892,
      "accuracy": 0.5663485042486323
    },
    {
      "threshold": 0.49999999999999994,
      "total_signals": 2541,
      "long_signals": 837,
      "short_signals": 1704,
      "signal_ratio": 0.14788732394366197,
      "accuracy": 0.608951228029333
    },
    {
      "threshold": 0.5499999999999999,
      "total_signals": 1889,
      "long_signals": 406,
      "short_signals": 1483,
      "signal_ratio": 0.10994063554883017,
      "accuracy": 0.6307181934582703
    },
    {
      "threshold": 0.5999999999999999,
      "total_signals": 866,
      "long_signals": 288,
      "short_signals": 578,
      "signal_ratio": 0.0504015830520312,
      "accuracy": 0.6386916540565708
    },
    {
      "threshold": 0.6499999999999999,
      "total_signals": 76,
      "long_signals": 58,
      "short_signals": 18,
      "signal_ratio": 0.004423233616575486,
      "accuracy": 0.6300779885927134
    },
    {
      "threshold": 0.7,
      "total_signals": 2,
      "long_signals": 2,
      "short_signals": 0,
      "signal_ratio": 0.00011640088464672332,
      "accuracy": 0.6289139797462461
    },
    {
      "threshold": 0.7499999999999999,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.6287975788615994
    },
    {
      "threshold": 0.7999999999999998,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.6287975788615994
    }
  ],
  "best_params": {
    "n_estimators": 162,
    "max_depth": 7,
    "min_samples_split": 17,
    "min_samples_leaf": 28,
    "thr_long": 0.47309376514300194,
    "thr_short": 0.5596036743458981,
    "min_confidence": 0.0019955157547150403,
    "stop_mult": 1.571809241588626,
    "take_mult": 0.6487237334292963,
    "trailing_mult": 0.923366406462633,
    "breakeven_mult": 0.7399304673630789
  },
  "config": {
    "session_config": {
      "prebuffer_min": 45,
      "session_len_min": 45,
      "volatility_window": 10,
      "zscore_window_days": 3,
      "volatility_threshold": 1.8,
      "cooldown_min": 30
    },
    "sim_config": {
      "commission": 0.001,
      "spread_pct": 0.0002,
      "risk_per_trade": 0.01,
      "max_position_pct": 0.1,
      "default_stop_pct": 0.005,
      "default_take_pct": 0.015,
      "max_hold_minutes": 30,
      "min_hold_bars": 3
    }
  }
}