{
  "horizon": 30,
  "timestamp": "20251217_234343",
  "metrics": {
    "long_accuracy": 0.8109498680738786,
    "short_accuracy": 0.824802110817942,
    "long_precision": 0.21890547263681592,
    "short_precision": 0.24615384615384617,
    "long_recall": 0.07290803645401822,
    "short_recall": 0.10209662716499544,
    "long_f1": 0.1093847110006215,
    "short_f1": 0.14432989690721648
  },
  "financial": {
    "pnl": -15.27081907885196,
    "sharpe": 8.008137607712705,
    "max_drawdown": 23.42981455214227
  },
  "feature_analysis": {
    "long_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.20542356258667943,
          "mutual_info": 0.006561771781378178,
          "abs_correlation": 0.02546590289724631
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.1184647473602869,
          "mutual_info": 0.002838909768852149,
          "abs_correlation": 0.016699911903060548
        },
        {
          "feature": "macd_hist",
          "importance": 0.09980410485633055,
          "mutual_info": 0.0032134445195945993,
          "abs_correlation": 0.012052925604562321
        },
        {
          "feature": "log_return",
          "importance": 0.08283187887376299,
          "mutual_info": 0.004172892470616141,
          "abs_correlation": 0.002006678187986608
        },
        {
          "feature": "rsi_14",
          "importance": 0.07590069514049431,
          "mutual_info": 0.0,
          "abs_correlation": 0.00507045467903305
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.07329475317537233,
          "mutual_info": 0.0,
          "abs_correlation": 0.046166215183072824
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.0627384833002044,
          "mutual_info": 0.0030622887825262346,
          "abs_correlation": 0.011876395636251957
        },
        {
          "feature": "volume_change",
          "importance": 0.0543253673718213,
          "mutual_info": 0.009472382780774558,
          "abs_correlation": 0.1157713090994973
        },
        {
          "feature": "log_return_lag_2",
          "importance": 0.05328133220139039,
          "mutual_info": 0.013702423291402033,
          "abs_correlation": 0.15518042521626296
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.052589780058102636,
          "mutual_info": 0.0039061366757076055,
          "abs_correlation": 0.0249868868414742
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.20542356258667943,
        "min_importance": 0.020656706728995305,
        "mean_importance": 0.07692307692307694
      }
    },
    "short_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.1778840797744775,
          "mutual_info": 0.0,
          "abs_correlation": 0.005826563411245229
        },
        {
          "feature": "macd_hist",
          "importance": 0.10430449961869562,
          "mutual_info": 0.001024295826629107,
          "abs_correlation": 0.000693159807292163
        },
        {
          "feature": "rsi_14",
          "importance": 0.09357559835507788,
          "mutual_info": 0.0,
          "abs_correlation": 0.003011295055499559
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.09089935542103399,
          "mutual_info": 0.0037700860112661605,
          "abs_correlation": 0.01976934797707861
        },
        {
          "feature": "hour_sin",
          "importance": 0.08254673749015462,
          "mutual_info": 0.00481061946911665,
          "abs_correlation": 0.03444874485644929
        },
        {
          "feature": "log_return",
          "importance": 0.06935742196882057,
          "mutual_info": 0.0006576398926820826,
          "abs_correlation": 0.032943861048858145
        },
        {
          "feature": "hour_cos",
          "importance": 0.06565232158438725,
          "mutual_info": 0.0,
          "abs_correlation": 0.0030628095485236836
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.06311903989560178,
          "mutual_info": 0.00381371187403845,
          "abs_correlation": 0.05942504922604221
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.05954812874945332,
          "mutual_info": 0.00990610322593577,
          "abs_correlation": 0.08898147375484829
        },
        {
          "feature": "volume_change",
          "importance": 0.05562095600918532,
          "mutual_info": 0.0,
          "abs_correlation": 0.03615532656253421
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.1778840797744775,
        "min_importance": 0.02957094408759913,
        "mean_importance": 0.07692307692307691
      }
    }
  },
  "trades_detailed": {
    "summary": {
      "total_trades": 299,
      "winning_trades": 81,
      "losing_trades": 218,
      "win_rate": 0.2709030100334448,
      "avg_win_pct": 0.00823990914001234,
      "avg_loss_pct": -0.003721457781947415,
      "profit_factor": 0.4706651133499876,
      "largest_win_pct": 0.030985713775810497,
      "largest_loss_pct": -0.03928545292142249,
      "avg_holding_minutes": 120.85906040268456
    },
    "by_direction": {
      "long": {
        "total_trades": 150,
        "winning_trades": 34,
        "losing_trades": 116,
        "win_rate": 0.22666666666666666,
        "avg_win_pct": 0.00760265003458581,
        "avg_loss_pct": -0.003585508060092964,
        "profit_factor": 0.3509544192253993,
        "largest_win_pct": 0.019004457043575895,
        "largest_loss_pct": -0.03773334438330267,
        "avg_holding_minutes": 99.19463087248322
      },
      "short": {
        "total_trades": 149,
        "winning_trades": 47,
        "losing_trades": 102,
        "win_rate": 0.31543624161073824,
        "avg_win_pct": 0.008700905088618767,
        "avg_loss_pct": -0.0038760672695465946,
        "profit_factor": 0.597525178510445,
        "largest_win_pct": 0.030985713775810497,
        "largest_loss_pct": -0.03928545292142249,
        "avg_holding_minutes": 142.5234899328859
      },
      "total_trades": 299,
      "long_count": 150,
      "short_count": 149
    },
    "holding_time_stats": {
      "mean": 120.45484949832776,
      "median": 74.0,
      "min": 0.0,
      "max": 2533.0,
      "std": 256.42045935301286
    },
    "exit_reasons": {
      "MAX_HOLD": 79,
      "TAKE_PROFIT": 23,
      "STOP_LOSS": 196,
      "FORCE_CLOSE": 1
    },
    "hourly_performance": {
      "6": {
        "avg_pnl": -1.1895731477914369,
        "win_rate": 0.3333333333333333,
        "total_trades": 6,
        "total_pnl": -7.137438886748621
      },
      "14": {
        "avg_pnl": -3.1646751109433326,
        "win_rate": 0.2727272727272727,
        "total_trades": 33,
        "total_pnl": -104.43427866112998
      },
      "17": {
        "avg_pnl": -1.9013183144295576,
        "win_rate": 0.19230769230769232,
        "total_trades": 26,
        "total_pnl": -49.4342761751685
      },
      "13": {
        "avg_pnl": -2.7217968015399725,
        "win_rate": 0.2571428571428571,
        "total_trades": 35,
        "total_pnl": -95.26288805389903
      },
      "0": {
        "avg_pnl": -3.3765104609175163,
        "win_rate": 0.16666666666666666,
        "total_trades": 18,
        "total_pnl": -60.77718829651529
      },
      "15": {
        "avg_pnl": -2.9435596679169644,
        "win_rate": 0.20689655172413793,
        "total_trades": 29,
        "total_pnl": -85.36323036959197
      },
      "16": {
        "avg_pnl": -0.5419843120730796,
        "win_rate": 0.2857142857142857,
        "total_trades": 28,
        "total_pnl": -15.17556073804623
      },
      "2": {
        "avg_pnl": -6.460349822509445,
        "win_rate": 0.0,
        "total_trades": 8,
        "total_pnl": -51.68279858007556
      },
      "4": {
        "avg_pnl": -3.5738155700006726,
        "win_rate": 0.0,
        "total_trades": 7,
        "total_pnl": -25.01670899000471
      },
      "9": {
        "avg_pnl": -0.4259942666791101,
        "win_rate": 0.2857142857142857,
        "total_trades": 7,
        "total_pnl": -2.981959866753771
      },
      "3": {
        "avg_pnl": 0.5838803113588319,
        "win_rate": 0.2857142857142857,
        "total_trades": 7,
        "total_pnl": 4.087162179511823
      },
      "19": {
        "avg_pnl": -2.400007060819524,
        "win_rate": 0.2,
        "total_trades": 15,
        "total_pnl": -36.00010591229286
      },
      "20": {
        "avg_pnl": -2.156041435495047,
        "win_rate": 0.21052631578947367,
        "total_trades": 19,
        "total_pnl": -40.964787274405886
      },
      "11": {
        "avg_pnl": -3.9541101623103816,
        "win_rate": 0.14285714285714285,
        "total_trades": 7,
        "total_pnl": -27.67877113617267
      },
      "18": {
        "avg_pnl": -1.1095608903067278,
        "win_rate": 0.26666666666666666,
        "total_trades": 15,
        "total_pnl": -16.643413354600916
      },
      "8": {
        "avg_pnl": -3.156242482741983,
        "win_rate": 0.0,
        "total_trades": 5,
        "total_pnl": -15.781212413709916
      },
      "10": {
        "avg_pnl": 4.812290629080287,
        "win_rate": 0.5,
        "total_trades": 2,
        "total_pnl": 9.624581258160575
      },
      "23": {
        "avg_pnl": 1.2616685753945358,
        "win_rate": 0.3333333333333333,
        "total_trades": 3,
        "total_pnl": 3.7850057261836074
      },
      "21": {
        "avg_pnl": -2.5689877962084724,
        "win_rate": 0.0,
        "total_trades": 8,
        "total_pnl": -20.55190236966778
      },
      "1": {
        "avg_pnl": 1.4388263103483032,
        "win_rate": 0.4444444444444444,
        "total_trades": 9,
        "total_pnl": 12.94943679313473
      },
      "5": {
        "avg_pnl": 3.7527592529092892,
        "win_rate": 0.5,
        "total_trades": 4,
        "total_pnl": 15.011037011637157
      },
      "22": {
        "avg_pnl": 1.051379025629642,
        "win_rate": 0.5,
        "total_trades": 6,
        "total_pnl": 6.308274153777852
      },
      "7": {
        "avg_pnl": 6.275660113909634,
        "win_rate": 1.0,
        "total_trades": 1,
        "total_pnl": 6.275660113909634
      },
      "12": {
        "avg_pnl": 10.519206803143327,
        "win_rate": 1.0,
        "total_trades": 1,
        "total_pnl": 10.519206803143327
      }
    },
    "confidence_quartiles": {
      "Q1": {
        "avg_pnl": -2.3662305933260215,
        "win_rate": 0.24,
        "avg_confidence": -0.17433534705717924,
        "trades": 75
      },
      "Q2": {
        "avg_pnl": -0.6292222198420832,
        "win_rate": 0.32,
        "avg_confidence": -0.08013065358571556,
        "trades": 75
      },
      "Q3": {
        "avg_pnl": -2.6426018542733543,
        "win_rate": 0.21621621621621623,
        "avg_confidence": 0.06506348502255155,
        "trades": 74
      },
      "Q4": {
        "avg_pnl": -2.2148621178065206,
        "win_rate": 0.17333333333333334,
        "avg_confidence": 0.1525918747158745,
        "trades": 75
      }
    }
  },
  "threshold_sensitivity": [
    {
      "threshold": 0.3,
      "total_signals": 1632,
      "long_signals": 1117,
      "short_signals": 515,
      "signal_ratio": 0.21530343007915567,
      "accuracy": 0.5757255936675462
    },
    {
      "threshold": 0.35,
      "total_signals": 2115,
      "long_signals": 988,
      "short_signals": 1127,
      "signal_ratio": 0.279023746701847,
      "accuracy": 0.55
    },
    {
      "threshold": 0.39999999999999997,
      "total_signals": 1988,
      "long_signals": 583,
      "short_signals": 1405,
      "signal_ratio": 0.26226912928759893,
      "accuracy": 0.5881266490765171
    },
    {
      "threshold": 0.44999999999999996,
      "total_signals": 1544,
      "long_signals": 428,
      "short_signals": 1116,
      "signal_ratio": 0.20369393139841688,
      "accuracy": 0.6385224274406333
    },
    {
      "threshold": 0.49999999999999994,
      "total_signals": 954,
      "long_signals": 365,
      "short_signals": 589,
      "signal_ratio": 0.1258575197889182,
      "accuracy": 0.6807387862796834
    },
    {
      "threshold": 0.5499999999999999,
      "total_signals": 498,
      "long_signals": 226,
      "short_signals": 272,
      "signal_ratio": 0.06569920844327176,
      "accuracy": 0.6986807387862797
    },
    {
      "threshold": 0.5999999999999999,
      "total_signals": 224,
      "long_signals": 104,
      "short_signals": 120,
      "signal_ratio": 0.02955145118733509,
      "accuracy": 0.7060686015831135
    },
    {
      "threshold": 0.6499999999999999,
      "total_signals": 63,
      "long_signals": 24,
      "short_signals": 39,
      "signal_ratio": 0.008311345646437995,
      "accuracy": 0.6998680738786279
    },
    {
      "threshold": 0.7,
      "total_signals": 1,
      "long_signals": 1,
      "short_signals": 0,
      "signal_ratio": 0.00013192612137203166,
      "accuracy": 0.696174142480211
    },
    {
      "threshold": 0.7499999999999999,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.696042216358839
    },
    {
      "threshold": 0.7999999999999998,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.696042216358839
    }
  ],
  "best_params": {
    "n_estimators": 86,
    "max_depth": 11,
    "min_samples_split": 16,
    "min_samples_leaf": 7,
    "thr_long": 0.48310591556139626,
    "thr_short": 0.5024618110237886,
    "min_confidence": 0.030775571749541035,
    "stop_mult": 1.4479786628517992,
    "take_mult": 1.6080068653000328,
    "trailing_mult": 1.5766245310039015,
    "breakeven_mult": 0.002057723462198166
  },
  "config": {
    "session_config": {
      "prebuffer_min": 45,
      "session_len_min": 45,
      "volatility_window": 10,
      "zscore_window_days": 3,
      "volatility_threshold": 1.8,
      "cooldown_min": 30
    },
    "sim_config": {
      "commission": 0.001,
      "spread_pct": 0.0002,
      "risk_per_trade": 0.01,
      "max_position_pct": 0.1,
      "default_stop_pct": 0.005,
      "default_take_pct": 0.015,
      "max_hold_minutes": 30,
      "min_hold_bars": 3
    }
  }
}