{
  "horizon": 15,
  "timestamp": "20251218_013220",
  "metrics": {
    "long_accuracy": 0.8119079837618404,
    "short_accuracy": 0.8579837618403248,
    "long_precision": 0.2686131386861314,
    "short_precision": 0.0,
    "long_recall": 0.17148182665424044,
    "short_recall": 0.0,
    "long_f1": 0.20932878270762229,
    "short_f1": 0.0
  },
  "financial": {
    "pnl": -17.25395542427337,
    "sharpe": 38.4277632011578,
    "max_drawdown": 58.757131422356835
  },
  "feature_analysis": {
    "long_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.2870319835316739,
          "mutual_info": 0.006847707063031727,
          "abs_correlation": 0.023735262516078187
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.14615303015695766,
          "mutual_info": 0.0059791501827102245,
          "abs_correlation": 0.019551936283263665
        },
        {
          "feature": "log_return",
          "importance": 0.08170504035750623,
          "mutual_info": 0.0067979205955635,
          "abs_correlation": 0.01773014041611684
        },
        {
          "feature": "macd_hist",
          "importance": 0.08082496434910938,
          "mutual_info": 0.0,
          "abs_correlation": 0.016323330226594747
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.07648599510695268,
          "mutual_info": 0.0004504745749982497,
          "abs_correlation": 0.0023432960029551187
        },
        {
          "feature": "rsi_14",
          "importance": 0.057628775135323655,
          "mutual_info": 0.0003871041704792688,
          "abs_correlation": 0.03685416733842849
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.04952073799152869,
          "mutual_info": 0.006793328912484631,
          "abs_correlation": 0.0175271903051269
        },
        {
          "feature": "volume_change",
          "importance": 0.04827954230552308,
          "mutual_info": 0.011312795397167452,
          "abs_correlation": 0.13456756458384408
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.04776620661416837,
          "mutual_info": 0.023240954394492697,
          "abs_correlation": 0.18583830594453596
        },
        {
          "feature": "log_return_lag_2",
          "importance": 0.047755208604300804,
          "mutual_info": 0.002605549715189559,
          "abs_correlation": 0.03604354412282884
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.2870319835316739,
        "min_importance": 0.008585972911623937,
        "mean_importance": 0.07692307692307694
      }
    },
    "short_model": {
      "top_10_features": [
        {
          "feature": "atr_pct",
          "importance": 0.23048122096663104,
          "mutual_info": 0.0027650972456987333,
          "abs_correlation": 0.013825149762860318
        },
        {
          "feature": "prev_candle_range",
          "importance": 0.11344076131479432,
          "mutual_info": 0.002312994084430642,
          "abs_correlation": 0.014178606720437682
        },
        {
          "feature": "macd_hist",
          "importance": 0.0949673541891973,
          "mutual_info": 0.00026159278668580477,
          "abs_correlation": 0.010709684562613573
        },
        {
          "feature": "rsi_14",
          "importance": 0.07734094249039913,
          "mutual_info": 0.0023156236503334426,
          "abs_correlation": 0.03627178075543437
        },
        {
          "feature": "log_return_lag_1",
          "importance": 0.07214847776269631,
          "mutual_info": 0.0003847306770488057,
          "abs_correlation": 0.02512950235997667
        },
        {
          "feature": "hour_sin",
          "importance": 0.07054181893957105,
          "mutual_info": 0.0,
          "abs_correlation": 0.01997639702800051
        },
        {
          "feature": "log_return",
          "importance": 0.06536523917070845,
          "mutual_info": 0.00016937837577435388,
          "abs_correlation": 0.010849411935739317
        },
        {
          "feature": "volume_change_lag_1",
          "importance": 0.061456034404331554,
          "mutual_info": 0.008594230551675519,
          "abs_correlation": 0.0851440055465387
        },
        {
          "feature": "prev_candle_body",
          "importance": 0.051101027861923096,
          "mutual_info": 0.010899081896031504,
          "abs_correlation": 0.11019698436232978
        },
        {
          "feature": "volume_change",
          "importance": 0.05094736012780926,
          "mutual_info": 0.002623836629083831,
          "abs_correlation": 0.01894983190218393
        }
      ],
      "feature_importance_stats": {
        "max_importance": 0.23048122096663104,
        "min_importance": 0.014338427999795612,
        "mean_importance": 0.07692307692307691
      }
    }
  },
  "trades_detailed": {
    "summary": {
      "total_trades": 300,
      "winning_trades": 145,
      "losing_trades": 155,
      "win_rate": 0.48333333333333334,
      "avg_win_pct": 0.0046075079946125575,
      "avg_loss_pct": -0.0038330342926771966,
      "profit_factor": 0.5407591186227122,
      "largest_win_pct": 0.02095282783101471,
      "largest_loss_pct": -0.02873226362183323,
      "avg_holding_minutes": 30.413333333333334
    },
    "by_direction": {
      "long": {
        "total_trades": 300,
        "winning_trades": 145,
        "losing_trades": 155,
        "win_rate": 0.48333333333333334,
        "avg_win_pct": 0.0046075079946125575,
        "avg_loss_pct": -0.0038330342926771966,
        "profit_factor": 0.5407591186227122,
        "largest_win_pct": 0.02095282783101471,
        "largest_loss_pct": -0.02873226362183323,
        "avg_holding_minutes": 30.413333333333334
      },
      "short": {
        "total_trades": 0,
        "winning_trades": 0,
        "losing_trades": 0,
        "win_rate": 0,
        "avg_win_pct": 0,
        "avg_loss_pct": 0,
        "profit_factor": 0,
        "largest_win_pct": 0,
        "largest_loss_pct": 0,
        "avg_holding_minutes": 0
      },
      "total_trades": 300,
      "long_count": 300,
      "short_count": 0
    },
    "holding_time_stats": {
      "mean": 30.413333333333334,
      "median": 15.0,
      "min": 1.0,
      "max": 503.0,
      "std": 51.084855768504326
    },
    "exit_reasons": {
      "HORIZON_EXIT": 143,
      "STOP_LOSS": 88,
      "MAX_HOLD": 34,
      "TAKE_PROFIT": 35
    },
    "hourly_performance": {
      "18": {
        "avg_pnl": -6.24610214281832,
        "win_rate": 0.3333333333333333,
        "total_trades": 12,
        "total_pnl": -74.95322571381985
      },
      "6": {
        "avg_pnl": -10.466573103273655,
        "win_rate": 0.2857142857142857,
        "total_trades": 7,
        "total_pnl": -73.26601172291558
      },
      "17": {
        "avg_pnl": -3.3850986614334193,
        "win_rate": 0.36363636363636365,
        "total_trades": 22,
        "total_pnl": -74.47217055153523
      },
      "8": {
        "avg_pnl": -1.0383349755184423,
        "win_rate": 0.7142857142857143,
        "total_trades": 7,
        "total_pnl": -7.268344828629097
      },
      "16": {
        "avg_pnl": -4.167774460054931,
        "win_rate": 0.4,
        "total_trades": 40,
        "total_pnl": -166.71097840219724
      },
      "2": {
        "avg_pnl": -13.965625242559732,
        "win_rate": 0.2,
        "total_trades": 15,
        "total_pnl": -209.48437863839598
      },
      "4": {
        "avg_pnl": -10.761899115852833,
        "win_rate": 0.125,
        "total_trades": 8,
        "total_pnl": -86.09519292682266
      },
      "9": {
        "avg_pnl": -15.583034365803341,
        "win_rate": 0.25,
        "total_trades": 8,
        "total_pnl": -124.66427492642673
      },
      "13": {
        "avg_pnl": 1.9264044112991687,
        "win_rate": 0.3684210526315789,
        "total_trades": 19,
        "total_pnl": 36.60168381468421
      },
      "14": {
        "avg_pnl": -3.0334236841119138,
        "win_rate": 0.3611111111111111,
        "total_trades": 36,
        "total_pnl": -109.20325262802889
      },
      "15": {
        "avg_pnl": -14.183549519343924,
        "win_rate": 0.3333333333333333,
        "total_trades": 27,
        "total_pnl": -382.95583702228595
      },
      "19": {
        "avg_pnl": -12.88924908780674,
        "win_rate": 0.16666666666666666,
        "total_trades": 18,
        "total_pnl": -232.0064835805213
      },
      "3": {
        "avg_pnl": 3.3532617842970365,
        "win_rate": 0.4444444444444444,
        "total_trades": 9,
        "total_pnl": 30.179356058673328
      },
      "7": {
        "avg_pnl": -25.18527406315537,
        "win_rate": 0.25,
        "total_trades": 4,
        "total_pnl": -100.74109625262147
      },
      "20": {
        "avg_pnl": 8.149672104854483,
        "win_rate": 0.5833333333333334,
        "total_trades": 12,
        "total_pnl": 97.79606525825379
      },
      "21": {
        "avg_pnl": -6.31518841679921,
        "win_rate": 0.2222222222222222,
        "total_trades": 9,
        "total_pnl": -56.83669575119289
      },
      "11": {
        "avg_pnl": 7.706824478668381,
        "win_rate": 0.5,
        "total_trades": 6,
        "total_pnl": 46.240946872010284
      },
      "10": {
        "avg_pnl": 1.5335864959879537,
        "win_rate": 0.3333333333333333,
        "total_trades": 6,
        "total_pnl": 9.201518975927723
      },
      "0": {
        "avg_pnl": -3.953050735745271,
        "win_rate": 0.4,
        "total_trades": 10,
        "total_pnl": -39.53050735745271
      },
      "22": {
        "avg_pnl": -16.87462287740766,
        "win_rate": 0.2857142857142857,
        "total_trades": 7,
        "total_pnl": -118.12236014185362
      },
      "12": {
        "avg_pnl": -0.4146942375527445,
        "win_rate": 0.5,
        "total_trades": 2,
        "total_pnl": -0.829388475105489
      },
      "5": {
        "avg_pnl": -21.060413875091,
        "win_rate": 0.3333333333333333,
        "total_trades": 3,
        "total_pnl": -63.181241625273
      },
      "1": {
        "avg_pnl": 0.7305907176930193,
        "win_rate": 0.5714285714285714,
        "total_trades": 7,
        "total_pnl": 5.114135023851135
      },
      "23": {
        "avg_pnl": -5.034634647608812,
        "win_rate": 0.3333333333333333,
        "total_trades": 6,
        "total_pnl": -30.207807885652876
      }
    },
    "confidence_quartiles": {
      "Q1": {
        "avg_pnl": -1.9520518207780106,
        "win_rate": 0.4533333333333333,
        "avg_confidence": 0.03217180163811361,
        "trades": 75
      },
      "Q2": {
        "avg_pnl": -10.092823547948027,
        "win_rate": 0.26666666666666666,
        "avg_confidence": 0.04894762315515905,
        "trades": 75
      },
      "Q3": {
        "avg_pnl": -7.885124940029624,
        "win_rate": 0.32,
        "avg_confidence": 0.07086042630729525,
        "trades": 75
      },
      "Q4": {
        "avg_pnl": -3.0752735902754083,
        "win_rate": 0.37333333333333335,
        "avg_confidence": 0.12224880704528146,
        "trades": 75
      }
    }
  },
  "threshold_sensitivity": [
    {
      "threshold": 0.3,
      "total_signals": 1730,
      "long_signals": 604,
      "short_signals": 1126,
      "signal_ratio": 0.11705006765899864,
      "accuracy": 0.6276725304465494
    },
    {
      "threshold": 0.35,
      "total_signals": 2939,
      "long_signals": 506,
      "short_signals": 2433,
      "signal_ratio": 0.19884979702300407,
      "accuracy": 0.5814614343707714
    },
    {
      "threshold": 0.39999999999999997,
      "total_signals": 3278,
      "long_signals": 612,
      "short_signals": 2666,
      "signal_ratio": 0.22178619756427606,
      "accuracy": 0.5935723951285521
    },
    {
      "threshold": 0.44999999999999996,
      "total_signals": 2615,
      "long_signals": 851,
      "short_signals": 1764,
      "signal_ratio": 0.17692828146143438,
      "accuracy": 0.6385656292286874
    },
    {
      "threshold": 0.49999999999999994,
      "total_signals": 1751,
      "long_signals": 673,
      "short_signals": 1078,
      "signal_ratio": 0.11847090663058187,
      "accuracy": 0.6837618403247632
    },
    {
      "threshold": 0.5499999999999999,
      "total_signals": 1192,
      "long_signals": 471,
      "short_signals": 721,
      "signal_ratio": 0.08064952638700948,
      "accuracy": 0.7038565629228687
    },
    {
      "threshold": 0.5999999999999999,
      "total_signals": 705,
      "long_signals": 514,
      "short_signals": 191,
      "signal_ratio": 0.04769959404600812,
      "accuracy": 0.7155615696887686
    },
    {
      "threshold": 0.6499999999999999,
      "total_signals": 258,
      "long_signals": 232,
      "short_signals": 26,
      "signal_ratio": 0.017456021650879568,
      "accuracy": 0.7167117726657646
    },
    {
      "threshold": 0.7,
      "total_signals": 28,
      "long_signals": 26,
      "short_signals": 2,
      "signal_ratio": 0.0018944519621109607,
      "accuracy": 0.7135994587280108
    },
    {
      "threshold": 0.7499999999999999,
      "total_signals": 2,
      "long_signals": 2,
      "short_signals": 0,
      "signal_ratio": 0.00013531799729364006,
      "accuracy": 0.7129228687415426
    },
    {
      "threshold": 0.7999999999999998,
      "total_signals": 0,
      "long_signals": 0,
      "short_signals": 0,
      "signal_ratio": 0.0,
      "accuracy": 0.7127875507442489
    }
  ],
  "best_params": {
    "n_estimators": 179,
    "max_depth": 8,
    "min_samples_split": 31,
    "min_samples_leaf": 10,
    "thr_long": 0.5017802351678581,
    "thr_short": 0.6617503944019839,
    "min_confidence": 0.025142376523508425,
    "stop_mult": 1.247341301123614,
    "take_mult": 1.0666121649422124,
    "trailing_mult": 0.540251135614467,
    "breakeven_mult": 0.23056808593799677
  },
  "config": {
    "session_config": {
      "prebuffer_min": 45,
      "session_len_min": 45,
      "volatility_window": 10,
      "zscore_window_days": 3,
      "volatility_threshold": 1.8,
      "cooldown_min": 30
    },
    "sim_config": {
      "commission": 0.001,
      "spread_pct": 0.0002,
      "risk_per_trade": 0.2,
      "max_position_pct": 0.5,
      "default_stop_pct": 0.005,
      "default_take_pct": 0.015,
      "max_hold_minutes": 30,
      "min_hold_bars": 3
    }
  }
}